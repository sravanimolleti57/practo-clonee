"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6686,7630,3301],{90971:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(97458),i=n(52983),o=n(88317),s=n(6904),r=n(86289),l=n(69826),c=n(29827),d=n(44440),u=n(83849),f=n.n(u);const h=e=>{let{step:t}=e;const n=i.useMemo((()=>{switch(t){case 1:return"This animation is powered by a state machine, allowing you to interact with it directly in this view. Let’s take a quick tour to get started.";case 2:return"This is the panel where you can view all state machine settings, triggers, and listeners in one place for better clarity.";case 3:return"Use this toggle to turn state machine mode ON or OFF, making it easier to switch between interactive and standard viewing modes.";default:return null}}),[t]);return(0,a.jsx)(c.yk,{children:n})},p=e=>{let{onClose:t,step:n}=e;const o=i.useMemo((()=>{switch(n){case 1:return"State machine mode is ON!";case 2:return"Explore the state machine panel";case 3:return"Toggle state machine mode";default:return null}}),[n]);return(0,a.jsx)(c.so,{onClose:t,children:o})},v=e=>{let{arrowOffset:t=0,arrowPadding:n=10,asChild:u,children:v,className:m,isStateMachinesModeActive:y,onClick:S,sideOffset:C=8,step:b,...g}=e;const{done:E,nextStep:w,state:x}=(0,o.N)(),I=x.tasks[s.O.STATE_MACHINES],A=I.currentStep||0,k=y&&A===b,T=i.useCallback((()=>{(0,l.Z9i)(new l.Z_Y({onboardingTaskId:s.O.STATE_MACHINES,action:"click",label:"dismiss CTA",from:"state machines popover",step:b.toString()})),E({taskId:s.O.STATE_MACHINES})}),[E,b]),M=i.useCallback((()=>{(0,l.Z9i)(new l.Z_Y({onboardingTaskId:s.O.STATE_MACHINES,action:"click",label:"next CTA",from:"state machines popover",step:b.toString()})),w({taskId:s.O.STATE_MACHINES})}),[w,b]),N=i.useCallback((()=>{(0,l.Z9i)(new l.Z_Y({onboardingTaskId:s.O.STATE_MACHINES,action:"click",label:"previous CTA",from:"state machines popover",step:b.toString()})),w({taskId:s.O.STATE_MACHINES,stepIncrement:-1})}),[w,b]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.J2,{anchor:v,open:k,anchorClassname:f()("relative",m),arrowPadding:n,arrowOffset:t,sideOffset:C,...g,maxWidth:"380px",children:[(0,a.jsx)(p,{step:A,onClose:T}),(0,a.jsx)(h,{step:A}),(0,a.jsx)(c.DT,{justify:"between",steps:I.steps,step:A,children:(0,a.jsxs)(d.k,{columnGap:4,children:[A>1&&(0,a.jsx)(r.z,{variant:"ghost",fontClasses:"text-white",onClick:N,children:"Previous"}),(0,a.jsx)(r.z,{fontClasses:"font-bold",onClick:M,children:I.steps===A?"Done":"Next"})]})})]})})}},18884:function(e,t,n){n.d(t,{Bk:function(){return l},Cm:function(){return r},I_:function(){return s},Io:function(){return d},MM:function(){return c}});var a=n(52983);const i={activeStates:[],currentStateMachineId:"",values:{}},o=(e,t)=>{switch(t.type){case"SET_CURRENT_STATE_MACHINE_ID":{const{stateMachineId:n}=t,a=n?e.values:{};return{...e,currentStateMachineId:n,activeStates:[],values:a}}case"SET_STATE_MACHINE_STATE_ENTERED":{const n=new Set(e.activeStates);return n.add(t.state),{...e,activeStates:Array.from(n)}}case"SET_STATE_MACHINE_STATE_EXITED":return{...e,activeStates:e.activeStates.filter((e=>e!==t.state))};case"SET_STATE_MACHINE_INPUT_VALUE":{const{name:n,value:a}=t;return{...e,values:{...e.values,[n]:a}}}default:return e}},s=()=>(0,a.useReducer)(o,i),r=e=>(0,a.useCallback)((t=>e({type:"SET_CURRENT_STATE_MACHINE_ID",stateMachineId:t})),[e]),l=e=>(0,a.useCallback)((t=>e({type:"SET_STATE_MACHINE_STATE_ENTERED",state:t})),[e]),c=e=>(0,a.useCallback)((t=>e({type:"SET_STATE_MACHINE_STATE_EXITED",state:t})),[e]),d=e=>(0,a.useCallback)(((t,n)=>e({type:"SET_STATE_MACHINE_INPUT_VALUE",name:t,value:n})),[e])},13787:function(e,t,n){n.d(t,{o:function(){return i}});var a=n(97458);const i=n(52983).forwardRef(((e,t)=>{let{children:n,contentWrapperCssClasses:i="flex-grow overflow-hidden",headerControl:o,headerWrapperCssClasses:s="bg-white h-16 flex items-center sm:px-6 px-2 border-b border-gray-100 flex-shrink-0",id:r}=e;return(0,a.jsxs)("div",{id:r,ref:t,"data-onboarding-watch":"create_menu_new_button",className:"flex overflow-y-auto absolute inset-0 flex-col w-full",children:[o&&(0,a.jsx)("div",{className:s,children:o}),(0,a.jsx)("div",{className:i,children:n})]})}));i.displayName="PageScaffold"},39391:function(e,t,n){n.d(t,{s:function(){return r}});var a=n(97458),i=(n(52983),n(75800)),o=n(44277),s=n(50251);const r=()=>{const[e,t]=(0,i.useRecoilState)(o.Hw);return(0,a.jsx)(s.n,{icon:"bounding-box",title:"Bounding box",onClick:()=>{t(!e)},iconColorClass:e?"text-actionPrimary":"text-gray-600"})}},79580:function(e,t,n){n.d(t,{s:function(){return c}});var a=n(97458),i=n(52983),o=n(86289),s=n(10836),r=n(91406),l=n(76682);const c=e=>{let{additionalV3Classname:t,body:n,buttonTitle:c,cancelTitle:d="Cancel",closeCallback:u=(()=>null),confirmLoading:f=!1,isDestructive:h=!0,onConfirm:p,showModal:v,testId:m,title:y,zIndexClassName:S="z-50",version:C="v2",clampTitleInV3:b=!0}=e;const g=(0,i.useCallback)((()=>{p()}),[p]),E=(0,i.useCallback)((e=>{u(e)}),[u]);return"v3"===C?(0,a.jsx)(l.H,{titleSeparator:!1,title:y,show:v,headerPadding:"p-4 pb-2",titleCssClass:"text-lg font-bold text-primary",contentPadding:"px-4 py-0",footerSeparator:!1,footer:(0,a.jsxs)("div",{className:"flex gap-x-2 justify-end items-center",children:[(0,a.jsx)(s.z,{onClick:()=>E(r.CloseSource.CANCEL_BUTTON),size:"sm",variant:"ghost",children:d}),(0,a.jsx)(s.z,{onClick:g,disabled:f,loading:f,size:"sm",variant:h?"danger":"primary",children:c})]}),clampTitleInV3:b,contentClass:t,children:(0,a.jsx)("p",{className:"text-sm text-primary",children:n})}):(0,a.jsx)(r.ModalV2,{show:v,title:y,paddingSize:"md",zIndexClassName:S,closeCallback:E,testId:m,children:(0,a.jsxs)("div",{className:"mt-6 space-y-10",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:n}),(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)(o.z,{variant:"ghost",onClick:()=>E(r.CloseSource.CANCEL_BUTTON),fluid:!0,children:d}),(0,a.jsx)(o.z,{disabled:f,showLoader:f,color:h?"red":"teal",onClick:g,fluid:!0,children:c})]})]})})};t.Z=c},30008:function(e,t,n){n.d(t,{K:function(){return a}});const a=(0,n(52983).createContext)({currentFrame:0,totalFrames:0})},52776:function(e,t,n){n.d(t,{w:function(){return l}});var a=n(52983),i=n(44818),o=n(91196),s=n(76558);var r=n(45922);function l(){const{user:e}=(0,i.a)(),[t,n]=function(e){const t=(0,s.useRouter)();return[t.isReady?t.query[e]:"",(0,a.useCallback)((n=>{if(!t.isReady)return void console.warn("React Router is not ready, please wait for the page to load before updating the query parameter. Skipping this query parameter update: ",n);const a={...t.query};a[e]=n,""===n&&delete a[e],t.push({query:a},void 0,{shallow:!0})}),[t])]}("panel"),[,l]=(0,o._)("animation_sidebar_panel_state",{}),c=(0,a.useMemo)((()=>{if("string"==typeof t){const e=Object.values(r.s).find((e=>e===t));if(e)return e}return r.s.NONE}),[t]),d=(0,a.useCallback)((e=>{t!==e&&n(e===r.s.NONE?"":e)}),[n]);return(0,a.useEffect)((()=>{(null==e?void 0:e.id)&&c!==r.s.NONE?l((t=>t[e.id]===c?t:{...t,[e.id]:c})):l({})}),[null==e?void 0:e.id,c]),[c,d]}},15085:function(e,t,n){n.d(t,{T:function(){return r}});var a=n(23617),i=n(96734),o=n(84867),s=n(21898);function r(e,t,n,r){const{workspaceSetting:l}=(0,s.h)(e),c=(0,i.SS)(o.AD.ENABLE_THORVG_PLAYER_COMPATIBILITY);var d;const u=null!==(d=null==l?void 0:l.defaultRenderer)&&void 0!==d?d:"automatic";return null!=n?{renderer:n,workspaceDefaultRenderer:u}:"2"===r?{renderer:"thorvg",workspaceDefaultRenderer:u}:c.on?"automatic"===u?{renderer:null!=t?t:a.R3,workspaceDefaultRenderer:u}:"lottie-web"===u?{renderer:"svg",workspaceDefaultRenderer:u}:"dotlottie-player"===u?{renderer:"thorvg",workspaceDefaultRenderer:u}:{renderer:a.R3,workspaceDefaultRenderer:u}:{renderer:a.R3,workspaceDefaultRenderer:u}}},14850:function(e,t,n){n.d(t,{P:function(){return s}});var a=n(96734),i=n(84867),o=n(52983);const s=(e,t)=>{const n=(0,a.SS)(i.AD.ENABLE_STATE_MACHINES);(0,o.useEffect)((()=>{n.value&&t(e.length>0)}),[e,t,n.value])}},58155:function(e,t,n){n.d(t,{t:function(){return i}});var a=n(52983);const i=e=>(0,a.useCallback)((t=>{var n;null===(n=e.current)||void 0===n||n.stateMachineFire(t)}),[e])},18324:function(e,t,n){n.d(t,{F:function(){return i}});var a=n(52983);const i=e=>(0,a.useCallback)(((t,n,a)=>{var i;if("string"===n)null===(i=e.current)||void 0===i||i.stateMachineSetStringInput(t,"string"==typeof a?a:"".concat(a));else if("number"===n){var o;const n="string"==typeof a?Number.parseFloat(a):a,i="boolean"==typeof n?Number(n):n,s=Number.isNaN(i)||!Number.isFinite(i)?0:i;null===(o=e.current)||void 0===o||o.stateMachineSetNumericInput(t,s)}else if("boolean"===n){var s;null===(s=e.current)||void 0===s||s.stateMachineSetBooleanInput(t,Boolean(a))}}),[e])},85657:function(e,t,n){n.d(t,{h:function(){return s}});var a=n(96734),i=n(84867),o=n(52983);const s=(e,t,n)=>{const s=(0,a.SS)(i.AD.ENABLE_STATE_MACHINES);return(0,o.useCallback)((a=>{var i,o;if(!s.value)return;const r=null!==(o=null===(i=t[0])||void 0===i?void 0:i.id)&&void 0!==o?o:"";(a?Promise.resolve().then((async()=>{var t,n;await(null===(t=e.current)||void 0===t?void 0:t.stateMachineLoad(r)),await(null===(n=e.current)||void 0===n?void 0:n.stateMachineStart())})):Promise.resolve().then((async()=>{var t,n;await(null===(t=e.current)||void 0===t?void 0:t.stateMachineStop()),null===(n=e.current)||void 0===n||n.play()}))).catch((()=>{})).finally((()=>{n(a?r:"")}))}),[n,s.value,t,e])}},41347:function(e,t,n){n.d(t,{Q:function(){return r}});var a=n(84867),i=n(88317),o=n(52983),s=n(96734);const r=(e,t)=>{const n=(0,s.SS)(a.AD.ENABLE_STATE_MACHINES),{start:r,state:l}=(0,i.N)();(0,o.useEffect)((()=>{n.value&&(e?t&&r({taskId:a.Oc.STATE_MACHINES}):r({taskId:a.Oc.CREATE_STATE_MACHINE}))}),[e,t,r,l.tasks])}},80349:function(e,t,n){n.d(t,{p:function(){return o}});var a=n(79120),i=n(52983);const o=e=>{let{color:t}=e;return(0,i.useMemo)((()=>{try{return(0,a.H3)(t)>=.5}catch(e){return!1}}),[t])}},86686:function(e,t,n){n.r(t),n.d(t,{default:function(){return dt}});var a=n(97458),i=n(96734),o=n(88264),s=n(69826),r=n(84867),l=n(83849),c=n.n(l),d=n(79120),u=n(77179),f=n.n(u),h=n(40909),p=n(90077),v=n.n(p),m=n(45186),y=n.n(m),S=n(52983),C=n(75296),b=n(75800),g=n(80794),E=n(71129),w=n(13787),x=n(39391),I=n(54140),A=n(98532),k=n(14938),T=n(50251),M=n(85642),N=n(31401),O=n(4585),j=n(45922),_=n(88317),L=n(6904),R=n(13219),P=n(37210),D=n(44440),F=n(86289);const U=(0,P.F4)({"0%":{opacity:0,transform:"scale(0)"},"100%":{opacity:1,transform:"scale(1)"}}),V=(0,P.zo)(R.VY,{transformOrigin:"var(--radix-popover-content-transform-origin)",animation:"".concat(U," 0.2s ease-in"),zIndex:9}),B=e=>{let{align:t,alignOffset:n,children:i,handleCtaClick:o,side:r,sideOffset:l=8}=e;const{done:c,nextStep:d,state:u}=(0,_.N)(),f=u.tasks[L.O.ACCESSIBILITY_ANALYZER].show;(0,S.useEffect)((()=>{f&&(0,s.Z9i)(new s.Z_Y({onboardingTaskId:L.O.ACCESSIBILITY_ANALYZER,action:"view",label:"accessibility analyzer link popover",from:"accessibility analyzer link popover",step:"1"}))}),[f]);const h=(0,S.useCallback)((()=>{(0,s.Z9i)(new s.Z_Y({onboardingTaskId:L.O.ACCESSIBILITY_ANALYZER,action:"click",label:"dismiss CTA",from:"accessibility analyzer link popover",step:"1"})),c({taskId:L.O.ACCESSIBILITY_ANALYZER})}),[c]),p=(0,S.useCallback)((()=>{(0,s.Z9i)(new s.Z_Y({onboardingTaskId:L.O.ACCESSIBILITY_ANALYZER,action:"click",label:"try it out CTA",from:"accessibility analyzer link popover",step:"1"})),d({taskId:L.O.ACCESSIBILITY_ANALYZER}),null==o||o(j.s.ACCESSIBILITY_ANALYZER)}),[o,d]),v=(0,S.useCallback)((e=>{e.preventDefault()}),[]);return(0,a.jsxs)(R.fC,{open:f,children:[(0,a.jsx)(R.ee,{children:i}),(0,a.jsx)(R.h_,{children:(0,a.jsxs)(V,{onOpenAutoFocus:v,onCloseAutoFocus:v,onFocusOutside:v,sideOffset:l,tabIndex:0,align:t,alignOffset:n,side:r,className:"relative rounded-lg flex-col w-[280px] h-full text-white bg-gray-900 z-10 border-0 select-none px-4 pb-3 pt-4 shadow-2xl",children:[(0,a.jsx)(R.Eh,{width:16,height:8,className:"visible text-gray-900 fill-current stroke-current"}),(0,a.jsxs)(D.k,{direction:"column",children:[(0,a.jsxs)(D.k,{justify:"between",align:"center",children:[(0,a.jsx)("h1",{className:"text-base font-bold text-white",children:"Accessibility Analyzer"}),(0,a.jsx)(A.h,{icon:"cross",sizeClass:"h-6 w-6",onClick:h,className:"text-white stroke-current",hoverBackgroundClass:"hover:bg-transparent"})]}),(0,a.jsx)("div",{className:"mt-4 mb-2 rounded-lg overflow-hidden bg-[#FF7BF9]",children:(0,a.jsx)("img",{src:"/images/accessibility-analyzer-popover/placeholder.png",alt:"Accessibility analyzer",className:"w-full h-auto"})}),(0,a.jsx)("p",{className:"text-sm text-gray-200 mb-7",children:"Lottie Accessibility Analyzer reviews key factors like color contrast, sensitivity motion, and more to identify issues, enhance experiences and meet accessibility standards."}),(0,a.jsx)(D.k,{columnGap:8,justify:"end",children:(0,a.jsx)(F.z,{fontClasses:"font-bold",onClick:p,children:"Try it out"})})]})]})})]})},G=e=>{let{canUseAccessibilityAnalyzer:t,currentPushoverTab:n,onAccessibilityAnalyzerMenuClick:i,onTabChange:o}=e;return t?(0,a.jsx)("div",{"data-onboarding-id":"accessibility-analyzer",children:(0,a.jsx)(B,{handleCtaClick:o,side:"left",align:"start",alignOffset:-16,sideOffset:9,children:(0,a.jsx)(T.n,{icon:"accessibility",title:"Accessibility Analyzer",onClick:i,iconColorClass:n===j.s.ACCESSIBILITY_ANALYZER?"text-actionPrimary":"text-gray-600"})})}):null};var Y=n(90971),z=n(61266);const Z=v()((async()=>n.e(2282).then(n.bind(n,32282))),{loadableGenerated:{webpack:()=>[32282]},ssr:!1}),q=e=>{let{animation:t,animationBackgroundValue:n,canFullAccess:i,canUseAccessibilityAnalyzer:o,canUseStateMachines:s,canView:r,currentPushoverTab:l,focused:d,hasStateMachines:u,isStateMachinesModeActive:f,onAccessibilityAnalyzerMenuClick:h,openAnimationPanel:p,openAnimationPanelFunc:v,popoverPortalRoot:m,previewVersion:y,setAnimationBackgroundValue:S,toggleFocused:C,toggleTransparencyGrid:b,transparencyGrid:g}=e;return(0,a.jsxs)("div",{className:"flex absolute right-0 top-8 bottom-8 flex-col p-0 min-h-0 -translate-x-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2","data-onboarding-id":"anim-panel-btn",children:[(0,a.jsx)(T.n,{icon:"info",title:"Animation information",onClick:v(j.s.FILE_INFO),iconColorClass:l===j.s.FILE_INFO?"text-actionPrimary":"text-gray-600",testId:"animation-info-button"}),r()&&(0,a.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,a.jsx)(T.n,{icon:"comment",title:"Comments",shortcut:(0,a.jsx)(k.z,{keys:["C"]}),onClick:v(j.s.COMMENTS),iconColorClass:l===j.s.COMMENTS?"text-actionPrimary":"text-gray-600",testId:"animation-comments-button"})}),i()&&(0,a.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,a.jsx)(T.n,{icon:"history",title:"Version history",onClick:v(j.s.VERSIONS),iconColorClass:l===j.s.VERSIONS?"text-actionPrimary":"text-gray-600",testId:"animation-version-button"})}),i()&&!y&&(0,a.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,a.jsx)(T.n,{icon:"color-palette",title:"Color Palette",onClick:v(j.s.COLOR_PALETTES),iconColorClass:l===j.s.COLOR_PALETTES?"text-actionPrimary":"text-gray-600",testId:"animation-color-palette-button"})}),(0,a.jsx)(G,{onTabChange:p,currentPushoverTab:l||j.s.NONE,onAccessibilityAnalyzerMenuClick:h,canUseAccessibilityAnalyzer:o}),!y&&(0,a.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,a.jsx)(T.n,{iconElement:(0,a.jsx)(z.kYg,{className:c()(l===j.s.SEGMENT_MOCKUP?"text-actionPrimary":"text-gray-600","size-6")}),title:"Segments & mockups",onClick:v(j.s.SEGMENT_MOCKUP),iconColorClass:l===j.s.SEGMENT_MOCKUP?"text-actionPrimary":"text-gray-600",testId:"animation-segment-button"})}),s&&(0,a.jsx)(Y.Z,{isStateMachinesModeActive:u&&f,step:2,side:"left",align:"start",alignOffset:-12,children:(0,a.jsx)(T.n,{icon:"state-mxn",title:"State machines",iconColorClass:c()({"text-actionPrimary":l===j.s.STATE_MACHINES,"text-gray-600":l!==j.s.STATE_MACHINES}),testId:"animation-state-machines-button",onClick:v(j.s.STATE_MACHINES)})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 pt-2 pb-4 md:mt-auto md:py-0",children:[(0,a.jsx)(x.s,{}),(0,a.jsx)(T.n,{icon:"grid",title:"Transparency grid",onClick:b,iconColorClass:g?"text-actionPrimary":"text-gray-600",testId:"animation-transparency-grid-button"}),(0,a.jsx)(Z,{animationBackgroundColor:n||"#f8fafc",canUpdate:i(),onChange:e=>{S(e)},fileId:t.id,portalRoot:m.current}),(0,a.jsx)(T.n,{icon:"full-screen",title:"Full screen",onClick:C,iconColorClass:d?"text-actionPrimary":"text-gray-600",testId:"animation-full-screen-button"}),(0,a.jsx)(I.L,{hoverIconColorClass:"hover:text-gray-600"}),(0,a.jsx)(O.c,{sideOffset:0,align:"end",arrowOffset:-8,side:"bottom",className:"flex justify-center items-center self-end w-full bg-white rounded-lg border border-subtle hover:bg-gray-100",children:(0,a.jsx)(M.q,{side:"left",align:"end",sideOffset:6,source:"animation sidebar",children:(0,a.jsx)(N.u,{title:"Help & resources",placement:"left",children:(0,a.jsx)(A.h,{id:"helper-menu",name:"help",rounded:!0,"aria-haspopup":"true","aria-expanded":"true",focusBackgroundClass:"none",hoverBackgroundClass:"hover:bg-gray-100",backgroundClass:"!size-8 !rounded-lg"})})})})]})]})};var H=n(91406),W=n(79580),K=n(42740),J=n(39281),Q=n(20516),X=n(44818),$=n(14186),ee=n(55928),te=n(52776),ne=n(80349),ae=n(57472),ie=n(91196),oe=n(96313),se=n(2336),re=n(10400),le=n(25675),ce=n(17433),de=n(90801),ue=n(44277),fe=n(53749),he=n(93458),pe=n(12112),ve=n(1131),me=n(15880),ye=n(98271),Se=n(7560),Ce=n(91034),be=n(63410),ge=n(56454);const Ee=async(e,t)=>{try{const n=new ClipboardItem({[t]:Promise.resolve(e())});return await navigator.clipboard.write([n]),!0}catch(e){return!1}};var we=n(26245),xe=n(43927);const Ie=e=>{if(e.hasAttributeNS("http://www.w3.org/1999/xlink","href")){const t=e.getAttributeNS("http://www.w3.org/1999/xlink","href");t&&t.startsWith("data:image/png;")&&e.setAttributeNS("http://www.w3.org/1999/xlink","href",t.replace("data:image/png;","data:;"))}},Ae=e=>{const t=e.childNodes;for(let n=0;n<t.length;n+=1){const a=t[n];a instanceof SVGElement&&"none"===a.style.display&&e.removeChild(a)}},ke=async e=>{let{animation:t,backgroundColor:a,container:i,dotLottie:o,dotLottieFormatVersion:s="1",format:r,frame:l,height:c,onSnapshot:d,themeId:u,width:f}=e;const h=(e=>{switch(e){case"text/plain":case"image/svg+xml":return"text/plain";case"image/png":return"image/png";default:throw new Error("Invalid content type")}})(r===Ce.U.SVG?"image/svg+xml":"image/png");if("1"===s){if(!t)return;await(async e=>{let{animation:t,backgroundColor:a,container:i,contentType:o,format:s,frame:r,height:l,onSnapshot:c,width:d}=e;const u=(await n.e(7255).then(n.t.bind(n,53409,23))).default.loadAnimation({container:i,renderer:"svg",loop:!1,autoplay:!1,animationData:t});u.pause(),u.goToAndStop(r,!0);const f=i.firstChild.cloneNode(!0),h=Array.from(f.getElementsByTagName("image"));f.style.backgroundColor=a,f.setAttribute("width","".concat(d)),f.setAttribute("height","".concat(l)),Ae(f),h.forEach(Ie);const p=(new XMLSerializer).serializeToString(f);if(s===Ce.U.SVG){const e=new Blob([p],{type:o});c({blob:e,contentType:o,format:s})}else{const e=new Worker(n.tu(new URL(n.p+n.u(5990),n.b)));e.onmessage=async t=>{if(t.data.type===Ce.i.Error);else if(t.data.type===Ce.i.Output){const e=t.data.buffer,n=new Blob([e],{type:o});c({blob:n,contentType:o,format:s})}e.terminate()},e.postMessage({type:Ce.i.Input,svg:p,width:d,height:l,backgroundColor:a})}u.destroy()})({animation:t,backgroundColor:a,container:i,contentType:h,format:r,frame:l,height:c,onSnapshot:d,width:f})}if(r===Ce.U.SVG)return;if(!o||!t)return;const p=new OffscreenCanvas(f,c),v=p.getContext("2d"),m=new xe.J({canvas:p,themeId:u,backgroundColor:a,autoplay:!1,data:t?JSON.stringify(t):await o.toArrayBuffer()});m.addEventListener("load",(async()=>{if(m.setFrame(l),!v){const e=await p.convertToBlob({type:h});return void await d({blob:e,contentType:h,format:r})}const e=await createImageBitmap(p);v.clearRect(0,0,p.width,p.height),a&&(v.rect(0,0,p.width,p.height),v.fillStyle=a||"transparent",v.fill()),v.drawImage(e,0,0,p.width,p.height);const t=await p.convertToBlob({type:h});await d({blob:t,contentType:h,format:r})}))};var Te=n(95049),Me=n(29602);var Ne=n(43450),Oe=n(49602),je=n(37986),_e=n(97630);const Le=e=>{const{children:t,stateMachinesReducerDispatch:n,stateMachinesReducerState:i}=e;return(0,a.jsx)(_e.AnimationPlayerStateMachinesProvider,{dispatch:n,state:i,children:(0,a.jsx)(je.T,{children:(0,a.jsx)(Oe.s,{children:t})})})};var Re=n(94749),Pe=n(15085),De=n(18884),Fe=n(34947),Ue=n(14850),Ve=n(41347),Be=n(58155),Ge=n(18324),Ye=n(85657);var ze=n(31791);function Ze(){const e=(0,ze._)(["\n  query GetFileStateMachines($fileId: String!, $fileVersionId: String) {\n    fileStateMachines(fileId: $fileId, fileVersionId: $fileVersionId) {\n      id\n      name\n      displayName\n      initial\n      inputs\n      interactions\n      states\n    }\n  }\n"]);return Ze=function(){return e},e}const qe=(0,n(24647).Ps)(Ze()),He=v()((async()=>n.e(9133).then(n.bind(n,19133))),{loadableGenerated:{webpack:()=>[19133]},ssr:!1}),We=v()((async()=>Promise.all([n.e(8365),n.e(1825),n.e(3207),n.e(3486),n.e(8751)]).then(n.bind(n,98751))),{loadableGenerated:{webpack:()=>[98751]},ssr:!1}),Ke=v()((async()=>n.e(1711).then(n.bind(n,1711))),{loadableGenerated:{webpack:()=>[1711]},ssr:!1}),Je=v()((async()=>Promise.all([n.e(7045),n.e(4421),n.e(8447)]).then(n.bind(n,68983))),{loadableGenerated:{webpack:()=>[68983]},ssr:!1}),Qe=v()((async()=>n.e(591).then(n.bind(n,50591))),{loadableGenerated:{webpack:()=>[50591]},ssr:!1}),Xe=v()((async()=>(await n.e(7069).then(n.bind(n,57069))).AnimationAccessibilityAnalyzerPanel),{loadableGenerated:{webpack:()=>[57069]},ssr:!1}),$e=v()((async()=>Promise.all([n.e(2900),n.e(3163)]).then(n.bind(n,33163))),{loadableGenerated:{webpack:()=>[33163]},ssr:!1}),et=v()((async()=>n.e(923).then(n.bind(n,70923))),{loadableGenerated:{webpack:()=>[70923]},ssr:!1}),tt=v()((async()=>n.e(2071).then(n.bind(n,92071))),{loadableGenerated:{webpack:()=>[92071]},ssr:!1}),nt=v()((async()=>n.e(901).then(n.bind(n,901))),{loadableGenerated:{webpack:()=>[901]},ssr:!1}),at=v()((async()=>Promise.all([n.e(7713),n.e(4622),n.e(6621)]).then(n.bind(n,46621))),{loadableGenerated:{webpack:()=>[46621]},ssr:!1}),it=v()((async()=>Promise.all([n.e(243),n.e(2410),n.e(2614),n.e(5627),n.e(4235),n.e(9455),n.e(6902),n.e(1666),n.e(2491)]).then(n.bind(n,52491))),{loadableGenerated:{webpack:()=>[52491]},ssr:!1}),ot=v()((async()=>Promise.resolve().then(n.bind(n,36509))),{loadableGenerated:{webpack:()=>[36509]},ssr:!1}),st=v()((async()=>Promise.all([n.e(5568),n.e(3889),n.e(5994)]).then(n.bind(n,5994))),{loadableGenerated:{webpack:()=>[5994]},ssr:!1}),rt=v()((async()=>Promise.all([n.e(8607),n.e(2306)]).then(n.bind(n,22306))),{loadableGenerated:{webpack:()=>[22306]},ssr:!1}),lt=v()((async()=>Promise.all([n.e(8365),n.e(1109),n.e(2900),n.e(1825),n.e(5280),n.e(7761),n.e(8121),n.e(1250),n.e(9038),n.e(2103)]).then(n.bind(n,63679))),{loadableGenerated:{webpack:()=>[63679]},ssr:!1}),ct=()=>{var e,t,n,l,u,p,v,m,E,x,I,k,T,M,N,O,L,R,P,D,F,U,V,B,G,Y;const{isConsideredNewUser:z,start:Z,state:we,stop:xe}=(0,_.N)(),[Ie,Ae]=(0,S.useState)(),[Oe,je]=(0,b.useRecoilState)(ue.sI),[_e,ze]=(0,S.useState)(),[Ze,ct]=(0,S.useState)(),dt=(0,b.useSetRecoilState)(he.E4),ut=(0,b.useSetRecoilState)(ue.GG),[ft,ht]=(0,S.useState)(null),[pt,vt]=(0,S.useState)(null),[mt,yt]=(0,S.useState)(!1),St=(0,b.useResetRecoilState)(ue.h3),Ct=(0,b.useResetRecoilState)(ue.lS),bt=(0,b.useSetRecoilState)(pe.QJ),[gt,Et]=(0,S.useState)(!1),wt=(0,S.useRef)(!1),xt=(0,S.useRef)(!1),It=(0,b.useSetRecoilState)(he.qx),[At,kt]=(0,S.useState)(),[Tt,Mt]=(0,S.useState)(!1),[Nt,Ot]=(0,S.useState)(!1),[jt,_t]=(0,S.useState)(""),[Lt,Rt]=(0,S.useState)(j.s.NONE),[Pt,Dt]=(0,S.useState)(!1),Ft=(0,Fe.tU)(),Ut=(0,S.useRef)(null),Vt=/^((?!chrome|android).)*safari/iu.test(navigator.userAgent),[Bt,Gt]=(0,S.useState)(!1),[Yt,zt]=(0,S.useState)(),[Zt,qt]=(0,S.useState)(null),[Ht,Wt]=(0,S.useState)(null),[Kt,Jt]=(0,S.useState)(null),[Qt,Xt]=(0,S.useState)(null),[$t,en]=(0,S.useState)(""),[tn,nn]=(0,S.useState)(""),an=(0,S.useRef)(!1),[on,sn]=(0,S.useState)(null),[rn,ln]=(0,De.I_)(),{activeStates:cn,currentStateMachineId:dn}=rn,un=(0,De.Cm)(ln),fn=(e=>{const t=(0,S.useMemo)((()=>{var t;if(!e)return"";let n=0;var a;const i=null!==(a=null==e||null===(t=e.fileObject)||void 0===t?void 0:t.stateMachines)&&void 0!==a?a:[];for(let e=0;e<i.length;e+=1){var o,s;const t=null!==(s=null===(o=i[e])||void 0===o?void 0:o.id)&&void 0!==s?s:"";for(let e=0;e<t.length;e+=1)n=(n<<5)-n+t.charCodeAt(e)}const r=(n>>>0).toString(36).padStart(7,"0");return"".concat(e.id,":").concat(r)}),[e]);return(0,S.useMemo)((()=>{var t,n;return null!==(n=null==e||null===(t=e.fileObject)||void 0===t?void 0:t.stateMachines)&&void 0!==n?n:[]}),[t])})(Oe),[hn,pn]=(0,S.useState)(!1);(0,S.useEffect)((()=>{fn.length>0&&!an.current&&fn[0]&&(nn(fn[0].id),an.current=!0)}),[fn]);const vn=(0,S.useCallback)((e=>{nn(e),an.current=!0}),[]),mn=(0,S.useRef)(!1),yn=(0,K.p)(),Sn=(0,h.useRouter)(),{frame:Cn,sort:bn,theme:gn}=Sn.query,En=(0,S.useRef)(!1);(0,S.useEffect)((()=>{"string"==typeof gn&&gn&&!En.current&&en(gn)}),[gn]);const wn=(0,S.useCallback)((e=>{en(e),En.current=!0;const t={...Sn.query};e?t.theme=e:delete t.theme,Sn.push({pathname:Sn.pathname,query:t},void 0,{shallow:!0})}),[Sn]),{done:xn,isLoaded:In,setWelcomeText:An,showChecklist:kn,showFirstPendingTask:Tn,state:Mn}=(0,oe.d)(),{handback_id:Nn,id:On}=Sn.query,jn=(0,X.a)(),{activeWorkspaceId:_n,setActiveWorkspace:Ln,workspaces:Rn}=(0,re.cF)(),Pn=(0,i.SS)(r.AD.ENABLE_MERGE_DOWNLOAD_HANDOFF_PANEL).on,Dn=(0,i.SS)(r.AD.ENABLE_ACCESSIBILITY_ANALYZER).on,Fn=(0,i.SS)(r.AD.ENABLE_STATE_MACHINES).value,Un=(0,i.SS)(r.AD.ENABLE_THORVG_RENDERER_SELECTOR).on,Vn=(null==Oe?void 0:Oe.fileObject.attributes.formatVersion)||"1",[Bn]=(0,g.aM)({query:le.wP,variables:{id:On},pause:!On}),[Gn]=(0,g.aM)({query:Re._V,variables:{fileId:On},pause:!On}),Yn=(0,S.useMemo)((()=>{if(Gn.data){var e;var t;return null!==(t=null===(e=Gn.data.fileVersions.edges[0])||void 0===e?void 0:e.node)&&void 0!==t?t:null}return null}),[Gn]),zn=(0,S.useMemo)((()=>!On||!Bn.data),[On,Bn.data]),[Zn]=(0,g.aM)({query:le.xQ,variables:{id:On,sort:bn,folderId:null===(t=Bn.data)||void 0===t||null===(e=t.file.folder)||void 0===e?void 0:e.id},pause:zn}),[qn]=(0,g.aM)({query:ge.gR,variables:{resourceId:null==Oe?void 0:Oe.id,resourceType:be.f.FILE},pause:!(null==Oe?void 0:Oe.id)}),Hn=(0,S.useMemo)((()=>{var e;const t="https://app.lottiefiles.com",n=null===(e=qn.data)||void 0===e?void 0:e.publicShare,a="".concat(t,"/animation/").concat(null==Oe?void 0:Oe.id);return n?"".concat(t,"/share/").concat(null==n?void 0:n.shareCode):a}),[null==Oe?void 0:Oe.id,null===(n=qn.data)||void 0===n?void 0:n.publicShare]),[Wn,Kn]=(0,te.w)(),[Jn,Qn]=(0,ie._)("animation_sidebar_panel_state",{}),Xn=(0,S.useCallback)((e=>{e?(ht(f()(e)),Jt(f()(e))):(ht(null),Jt(null))}),[]),$n=e=>{var t,n;pn(!0);const i="next"===e?null===(t=Zn.data)||void 0===t?void 0:t.fileAboveAndBelowId.nextAnimation:null===(n=Zn.data)||void 0===n?void 0:n.fileAboveAndBelowId.prevAnimation;if(i){const t={...Sn.query};t.id=i,delete t.theme,En.current=!1,Sn.push({pathname:"/animation/[id]",query:t},void 0,{shallow:!0}),"next"===e?xt.current=!1:wt.current=!1}else{const t="next"===e?wt:xt;if(!t.current){const e=(0,a.jsx)("div",{children:"No more animations to go to"});null==yn||yn.pushCustom(e,1e3,"!bg-gray-900","text-white"),t.current=!0}}};(0,ae.Z)({key:"k",action:()=>$n("next"),dependencies:[Zn,Wn,Sn],takesPrecedence:!0}),(0,ae.Z)({key:"j",action:()=>$n("prev"),dependencies:[Zn,Wn,Sn],takesPrecedence:!0});const ea=(0,De.Io)(ln),ta=(0,Be.t)(Ft),na=(0,Ge.F)(Ft);(0,S.useEffect)((()=>{if(Zn.data&&Zn.data.fileAboveAndBelowId.nextAnimation&&!mn.current){var e;const t="next-prev-toast-".concat(null===(e=jn.user)||void 0===e?void 0:e.id),n=localStorage.getItem(t),i=(new Date).getTime();if(!n||i-parseInt(n,10)>12096e5){localStorage.setItem(t,i.toString());const e=(0,a.jsxs)("div",{children:["Use the ",(0,a.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,a.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==yn||yn.pushCustom(e,3e3,"!bg-gray-900","text-white")}mn.current=!0}}),[yn,null===(l=jn.user)||void 0===l?void 0:l.id,Zn.data]),(0,S.useEffect)((()=>{if(Bn.data){var e,t;const i=null===(e=Bn.data.file.folder)||void 0===e?void 0:e.id,o=null===(t=Bn.data.file.folder)||void 0===t?void 0:t.name,s=Bn.data.file.project.id,r=Bn.data.file.project.title;var n;const l=null!==(n=Bn.data.file.project.isPrivate)&&void 0!==n&&n;var a;const c=null!==(a=Bn.data.file.project.isSystem)&&void 0!==a&&a,d=Bn.data.file.project.workspaceId,u=Rn.some((e=>{let{id:t}=e;var n;return t===(null===(n=Bn.data)||void 0===n?void 0:n.file.project.workspaceId)}));d&&u&&d!==_n&&Ln(d,!1),bt({type:i?"folder":"project",name:i?o:r,folderId:i,folderName:o,projectId:s,projectTitle:r,isPrivate:l,isSystem:c,workspaceId:d})}}),[Bn.data,bt,_n,Ln,Rn]);const[aa,ia]=(0,S.useState)(""),[oa]=(0,b.useRecoilState)(ue.h3),{canDownload:sa,canFullAccess:ra,canView:la}=(0,Q.a)({scopes:(null==Oe?void 0:Oe.animationPermissionScopes)||[]}),[ca,da]=(0,S.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null});(0,S.useEffect)((()=>{var e;if((St(),Bn.fetching&&It(!0),!Bn.fetching)&&(It(!1),On&&Wn===j.s.NONE&&window.innerWidth>768))if(Jn&&(null===(e=jn.user)||void 0===e?void 0:e.id)&&Jn[jn.user.id]){const e=Jn[jn.user.id];e===j.s.LOTTIE_MOCKUP?Kn(j.s.SEGMENT_MOCKUP):Kn(e)}else hn||Kn(j.s.DOWNLOAD)}),[Bn,On]);const ua=(0,S.useCallback)((e=>{try{void 0!==(0,d.H3)(e)&&ia(e)}catch(e){ia("")}}),[]);(0,S.useEffect)((()=>{var e,t;if(null==oa?void 0:oa.fileObject){var n;Ae(oa.fileObject.url),ze(oa.fileObject.metadata),ct(oa.fileObject.attributes),vt(oa.fileObject),kt(oa.tags),Xt(null!==(n=oa.fileObject.themes)&&void 0!==n?n:null),ua(oa.backgroundColor);const e=oa.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();ut("lottie"===t)}else if((null===(e=Bn.data)||void 0===e?void 0:e.file)&&Bn.data.file.fileObject&&!Bn.fetching){var a,i;Ae(Bn.data.file.fileObject.url),je(Bn.data.file),dt({type:"project",id:Bn.data.file.project.id}),ze(Bn.data.file.fileObject.metadata),ct(Bn.data.file.fileObject.attributes),vt(Bn.data.file.fileObject),kt(Bn.data.file.currentVersion.tags),Xt(null!==(i=Bn.data.file.fileObject.themes)&&void 0!==i?i:null),da({id:Bn.data.file.id,showDescOnCollection:Bn.data.file.showDescOnCollection,description:Bn.data.file.description,descriptionUpdatedAt:null===(a=Bn.data.file)||void 0===a?void 0:a.descriptionUpdatedAt,descriptionModifiedBy:Bn.data.file.descriptionModifiedBy}),ua(Bn.data.file.backgroundColor);const e=Bn.data.file.fileObject.url,t=e.substring(e.lastIndexOf("/")+1,e.indexOf("?")).split(".").pop();ut("lottie"===t)}else Bn.error&&(0,ye.w)(Bn.error);if(null===(t=Bn.data)||void 0===t?void 0:t.file.upgradeRequired)throw new J.K}),[Bn,oa,ut,je,dt,ua]);const[fa]=(0,g.aM)({query:qe,variables:{fileId:On,fileVersionId:null==oa?void 0:oa.id},pause:!On||!(null==oa?void 0:oa.id)}),ha=(0,S.useMemo)((()=>{var e,t;return(null==oa?void 0:oa.id)?null!==(t=null===(e=fa.data)||void 0===e?void 0:e.fileStateMachines)&&void 0!==t?t:[]:fn}),[fn,null==oa?void 0:oa.id,null===(u=fa.data)||void 0===u?void 0:u.fileStateMachines]),pa=fn.length>0,va=Boolean(dn)&&pa,ma=(e=>{const{onSelectStateMachine:t,playerRef:n}=e;return(0,S.useCallback)((async e=>{const a=n.current,i=await(null==a?void 0:a.stateMachineActiveId());a&&e&&i!==e&&(await a.stateMachineLoad(e),await a.stateMachineStart()),t(e)}),[t])})({playerRef:Ft,onSelectStateMachine:un}),ya=(0,Ye.h)(Ft,fn,ma),Sa=(0,S.useCallback)((async()=>{var e,t;if(oa){var n,a,i,o;const e=null!==(o=null===(i=fa.data)||void 0===i||null===(a=i.fileStateMachines)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.name)&&void 0!==o?o:"";return void ma(e)}const s=null!==(t=null===(e=fn[0])||void 0===e?void 0:e.id)&&void 0!==t?t:"";ma(s)}),[ma,oa,fn,null===(p=fa.data)||void 0===p?void 0:p.fileStateMachines]);(0,S.useEffect)((()=>{var e;(null===(e=Bn.data)||void 0===e?void 0:e.file.id)&&(0,s.Z9i)(new s.Aj3({assetType:Bn.data.file.type,fileId:Bn.data.file.id,projectId:Bn.data.file.project.id,workspaceId:Bn.data.file.project.workspaceId,url:window.location.href}))}),[null===(v=Bn.data)||void 0===v?void 0:v.file.id,null===(m=Bn.data)||void 0===m?void 0:m.file.project.id,null===(E=Bn.data)||void 0===E?void 0:E.file.project.workspaceId,null===(x=Bn.data)||void 0===x?void 0:x.file.type]);const[Ca,ba]=(0,S.useState)(!1),[ga,Ea]=(0,S.useState)(!1),wa=(0,C.r)(),[,xa]=(0,b.useRecoilState)(fe.YC),Ia=(0,S.useCallback)((()=>{Sn.query.comment&&(delete Sn.query.comment,Sn.push({pathname:Sn.pathname,query:Sn.query},void 0,{shallow:!0}))}),[Sn]),Aa=(0,S.useCallback)((()=>{if(Wn===j.s.ACCESSIBILITY_ANALYZER&&we.tasks[r.Oc.ACCESSIBILITY_ANALYZER].show&&xe({taskId:r.Oc.ACCESSIBILITY_ANALYZER}),Wn===j.s.STATE_MACHINES&&(ma(""),(0,s.Z9i)(new s.E5o({action:"panel-close",target:"state machine panel close button",description:"click to dismiss state machine panel"}))),Wn===j.s.SEGMENT_MOCKUP&&Tt)return Ot(!0),void Rt(j.s.NONE);Kn(j.s.NONE),Qn((e=>{var t;if(null===(t=jn.user)||void 0===t?void 0:t.id){const t={...e};return delete t[jn.user.id],t}return e})),Sn.query.panel&&(delete Sn.query.panel,Sn.push({pathname:Sn.pathname,query:Sn.query},void 0,{shallow:!0}))}),[Wn,we.tasks,Kn,Qn,Sn,xe,ma,Tt,null===(I=jn.user)||void 0===I?void 0:I.id]),ka=(0,S.useCallback)((e=>()=>{if(Wn===e)Aa();else{if(Wn===j.s.SEGMENT_MOCKUP&&Tt)return Ot(!0),void Rt(e);Kn(e),Qn((t=>{var n;return(null===(n=jn.user)||void 0===n?void 0:n.id)?{...t,[jn.user.id]:e}:t})),Sn.query.panel!==e&&(Sn.query.panel=e,Sn.push({pathname:Sn.pathname,query:Sn.query},void 0,{shallow:!0}))}}),[Aa,Wn,null===(k=jn.user)||void 0===k?void 0:k.id,Tt,Sn,Kn,Qn]);(0,S.useEffect)((()=>{xa(""),Et(!1),Xn(null),Ia()}),[Wn,xa,Et,Ia,Xn]),(0,ae.Z)({key:"c",action:()=>{Wn!==j.s.COMMENTS?ka(j.s.COMMENTS)():Wn===j.s.COMMENTS&&Aa()},dependencies:[ka,Aa,Wn]});const[Ta]=(0,g.aM)({query:ce.g,variables:{id:Nn},pause:!Nn});(0,S.useEffect)((()=>{Bn.data&&Oe&&(Wn!==j.s.COMMENTS&&Sn.query.comment&&(ka(j.s.COMMENTS)(),Sn.push({pathname:Sn.pathname,query:Sn.query},void 0,{shallow:!0})),sa()||Wn!==j.s.DOWNLOAD||ka(j.s.COMMENTS)(),sa()||Wn!==j.s.EMBED||ka(j.s.COMMENTS)(),Dn||Wn!==j.s.ACCESSIBILITY_ANALYZER||ka(j.s.FILE_INFO)(),Sn.query.edit_description&&(Wn!==j.s.FILE_INFO&&ka(j.s.FILE_INFO)(),Et(!0),delete Sn.query.edit_description,Sn.replace({pathname:Sn.pathname,query:Sn.query},void 0,{shallow:!0})))}),[Oe,Wn,Sn,ka,gt,sa,Bn.data,Dn]);const Ma=(0,S.useCallback)((()=>{if(Tt&&!Ca)return Ot(!0),void Dt(!0);Ca?(ba(!1),wa.exit()):(ba(!0),Aa(),wa.enter())}),[Aa,Ca,wa,Tt]),Na=(0,S.useCallback)(((e,t)=>{t===wa&&ba(!!e)}),[wa]);(0,S.useEffect)((()=>{var e;Oe&&("color-palette"!==Sn.query.from||(null===(e=Mn.tasks[me.X.CUSTOMIZE_COLOR])||void 0===e?void 0:e.done)||(xn(me.X.CUSTOMIZE_COLOR),kn(!0)),"download"===Sn.query.from||"embed"===Sn.query.from||!In||Mn.seen||Mn.show||(An(Mn.newToOnboarding?"Welcome! Learn all about our platform's most helpful features with this checklist ✨":"Level up your motion design game by exploring our platform's most helpful features in this checklist ✨"),kn(!0),Tn()))}),[Oe,Mn,xn]);const Oa=(0,S.useCallback)((()=>{Ea(!ga)}),[ga,Ea]),ja=(0,S.useRef)(null),_a=null!==on?on:null==Oe?void 0:Oe.rendererOverride,{renderer:La}=(0,Pe.T)((null==Oe||null===(T=Oe.project)||void 0===T?void 0:T.workspaceId)||null,(null==Yn?void 0:Yn.renderer)||"svg",_a,Vn),Ra=(0,S.useCallback)((e=>{sn(e)}),[]),Pa=(0,S.useMemo)((()=>(null==oa?void 0:oa.id)||(null==Oe?void 0:Oe.currentVersionId)||""),[null==oa?void 0:oa.id,null==Oe?void 0:Oe.currentVersionId]),Da=(0,S.useMemo)((()=>{var e,t;return{entityId:Pa,entityGroupId:(null==Oe?void 0:Oe.id)||On,isEnabled:!(null==oa?void 0:oa.id)||oa.id===(null==Oe?void 0:Oe.currentVersionId),workspaceId:(null==Oe||null===(t=Oe.project)||void 0===t||null===(e=t.workspace)||void 0===e?void 0:e.id)||""}}),[Pa,null==oa?void 0:oa.id,null==Oe?void 0:Oe.currentVersionId,null==Oe?void 0:Oe.id,null==Oe||null===(N=Oe.project)||void 0===N||null===(M=N.workspace)||void 0===M?void 0:M.id,On]),Fa=(0,$.X0)(Da),Ua=(0,$.us)(Da),Va=(0,$.es)(Da),Ba=(0,$.VP)(Da),Ga=(0,$.UR)(Da),Ya=(0,$.OL)(Da),za=(0,$._i)(Da),{canFetchMoreComments:Za,commentsQuery:qa,onFetchMoreComments:Ha,onHideReplies:Wa,onShowReplies:Ka,parentComment:Ja,pushoverMode:Qa}=(0,ee.M)({entityId:Wn===j.s.COMMENTS?Pa:"",entityType:ve.TY.FileVersion});(0,S.useEffect)((()=>{Cn&&Wa(null)}),[Cn,Wa]);const Xa=(0,ne.p)({color:aa||"#f8fafc"}),[$a]=(0,g.aM)({query:de.mT,variables:{id:On},pause:!On||Wn!==j.s.COMMENTS}),[ei,ti]=(0,S.useState)(!1),ni=(0,S.useCallback)((()=>ti(!0)),[]),ai=(0,S.useCallback)((()=>ti(!1)),[]),ii=(0,S.useCallback)((()=>{const e=new s.RdL("button","discard changes","unsaved segment changes modal");return Pt?(Mt(!1),Dt(!1),ba(!0),Kn(j.s.NONE),void wa.enter()):((0,s.Z9i)(e),jt?(Mt(!1),void Sn.push(jt)):(Mt(!1),Kn(Lt),void Rt(j.s.NONE)))}),[wa,Sn,Kn,Pt,Lt,jt]);(0,S.useEffect)((()=>{ai()}),[Qa,ai]),(0,S.useEffect)((()=>{const e=e=>{if(Tt&&!Nt)throw Sn.events.emit("routeChangeError"),Ot(!0),_t(e),"Abort route change. Please ignore this error.";Nt&&Ot(!1)};return Sn.events.on("routeChangeStart",e),()=>{Sn.events.off("routeChangeStart",e)}}),[Tt,Sn.events,Nt]);const oi=(0,S.useCallback)((async e=>{await navigator.clipboard.writeText(Hn),(0,s.Z9i)(new s.wkv({source:e,subject:"animation",variant:Hn.includes("share")?"public-share":"direct"})),null==yn||yn.pushCustom("Animation link copied",2500,"!bg-gray-900","text-white")}),[Hn,yn]),si=(0,S.useCallback)((()=>{Gt(!1),qt(null),Wt(null),zt(void 0)}),[]),ri=(0,S.useCallback)((async()=>{if(!Zt||!Ht||!Yt)return;if(await Ee((async()=>Zt),Ht)){const e=Yt===Ce.U.SVG?"SVG frame copied":"PNG frame copied";null==yn||yn.pushCustom(e,2500,"!bg-gray-900","text-white")}si()}),[Zt,Ht,Yt,si,yn]),li=(0,S.useCallback)((async e=>{if(Vt)return Wt(e.contentType),zt(e.format),qt(e.blob),void Gt(!0);if(await Ee((async()=>e.blob),e.contentType)){const t=e.format===Ce.U.SVG?"SVG frame copied":"PNG frame copied";null==yn||yn.pushCustom(t,2500,"!bg-gray-900","text-white")}}),[Vt,yn]),ci=(0,S.useCallback)((async e=>{let t,{format:n,frame:a,height:i,width:o}=e;if(!Ie)return;const s=await Te.J2.fromURL(Ie,"preserve");if($t);else if(Kt)t=Kt;else{const e=await(0,Se.tr)(Ie);if(!e)return void(null==yn||yn.pushError("Failed "));t=e}ke({animation:t,dotLottie:s,dotLottieFormatVersion:Vn,themeId:$t||"",backgroundColor:ga?"transparent":aa,container:Ut.current,format:n,frame:a,height:i,width:o,onSnapshot:li})}),[aa,Kt,li,$t,yn,ga,Vn,Ie]);(0,ae.Z)({key:"l",takesPrecedence:!0,metaKeyRequired:!0,action:()=>{oi("keypress")},dependencies:[oi]});const di=(0,S.useCallback)((e=>{if(Wn!==e){if(Wn===j.s.SEGMENT_MOCKUP&&Tt)return Ot(!0),void Rt(e);(0,s.Z9i)(new s.lFJ({location:e})),ka(e)()}}),[Wn,Tt,ka]),ui=(0,S.useCallback)((e=>{e===j.s.ACCESSIBILITY_ANALYZER&&we.tasks[r.Oc.ACCESSIBILITY_ANALYZER].show&&xe({taskId:r.Oc.ACCESSIBILITY_ANALYZER})}),[we.tasks,xe]),fi=(0,S.useCallback)((e=>()=>{ui(e),di(e)}),[ui,di]),hi=(0,S.useCallback)((e=>{const t=e===H.CloseSource.GENERIC?"cross":"stay on page",n=new s.RdL("button",t,"unsaved segment changes modal");e===H.CloseSource.GENERIC&&(0,s.Z9i)(n),e===H.CloseSource.CANCEL_BUTTON&&(0,s.Z9i)(n),Ot(!1)}),[]),pi=jn.isAuthenticated&&(null===(O=jn.user)||void 0===O?void 0:O.id)?"".concat(jn.user.id):"guest",[,vi]=(0,ie._)("wf:animation-page-visit-count:".concat(pi),0);(0,S.useEffect)((()=>{vi((e=>e<Number.MAX_SAFE_INTEGER?e+1:e))}),[Sn.pathname,vi]);const mi=(0,S.useCallback)((()=>{fi(j.s.ACCESSIBILITY_ANALYZER)()}),[fi]),{isLoading:yi,optimizedVariants:Si,originalSize:Ci}=((e,t,n)=>{var a,i,o;const[s,r]=(0,S.useState)(),l=(0,S.useMemo)((()=>({fileId:t,fileVersionId:n})),[t,n]),[c,d]=(0,g.aM)({query:le.ZR,variables:l,requestPolicy:"network-only",pause:!t||!n}),[u,f]=(0,g.Db)(le.VA),[h,p]=(0,g.Db)(le.l$);(0,S.useEffect)((()=>{t&&n&&d({requestPolicy:"network-only"})}),[t,n,d]),(0,S.useEffect)((()=>{(async()=>{var e,a;t&&n&&!(null===(a=c.data)||void 0===a||null===(e=a.fileVariants)||void 0===e?void 0:e.length)&&(await f({fileId:t,fileVersionId:n}),await p({fileId:t,fileVersionId:n}),d({requestPolicy:"network-only"}))})()}),[t,n,null===(i=c.data)||void 0===i||null===(a=i.fileVariants)||void 0===a?void 0:a.length]);const v=(0,S.useMemo)((()=>{var e,t,n;const a=null!==(n=null===(t=c.data)||void 0===t||null===(e=t.fileVariants)||void 0===e?void 0:e.filter((e=>e.isOptimized)))&&void 0!==n?n:[],i=new Map;return a.forEach((e=>{i.has(e.fileSize)||i.set(e.fileSize,e)})),Array.from(i.values()).sort(((e,t)=>"application/zip"===e.contentType?-1:"application/zip"===t.contentType?1:0))}),[null===(o=c.data)||void 0===o?void 0:o.fileVariants]);var m;return(0,S.useEffect)((()=>{let t=!0;return(async()=>{if(e)try{const n=await(0,Se.yo)(e);t&&r(n)}catch(e){console.error("Failed to extract animation buffer:",e)}})(),()=>{t=!1}}),[e]),{isLoading:c.fetching||!s||u.fetching||h.fetching,optimizedVariants:v,originalSize:null!==(m=null==s?void 0:s.byteLength)&&void 0!==m?m:0}})(Ie,null==Oe?void 0:Oe.id,null==Oe?void 0:Oe.currentVersionId);return(0,S.useEffect)((()=>{!Oe||Wn===j.s.ACCESSIBILITY_ANALYZER||we.tasks[r.Oc.ENABLE_ASSET_LINK].show&&Wn===j.s.EMBED||Z({taskId:r.Oc.ACCESSIBILITY_ANALYZER})}),[Oe,z,we,Z,Wn]),(0,Ue.P)(fn,ya),(0,Ve.Q)(pa,va),(e=>{const t=(0,i.SS)(r.AD.ENABLE_STATE_MACHINES),{onSwitchStateMachine:n,selectedStateMachineId:a,stateMachines:o}=e;(0,S.useEffect)((()=>{var e,i;if(!t.value)return;if(!a)return;if(0===o.length)return;if(o.find((e=>"assetId"in e?e.id===a:e.name===a),[]))return void n(a);const s="object"==typeof o[0]&&"assetId"in o[0]?o[0].id:null!==(i=null===(e=o[0])||void 0===e?void 0:e.name)&&void 0!==i?i:"";n(s)}),[o])})({stateMachines:ha,selectedStateMachineId:dn,onSwitchStateMachine:ma}),(0,a.jsxs)(Le,{stateMachinesReducerDispatch:ln,stateMachinesReducerState:rn,children:[(0,a.jsx)(y(),{children:(0,a.jsx)("title",{children:"Animation - LottieFiles Platform"})}),(0,a.jsxs)(w.o,{headerControl:(0,a.jsx)(se.s,{features:null==Oe?void 0:Oe.features,children:(0,a.jsx)(lt,{animation:Oe,animationFetching:Bn.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Oe&&(0,a.jsxs)(se.s,{features:Oe.features,children:[(0,a.jsxs)(C.I,{className:c()({"flex flex-grow":!0}),handle:wa,onChange:Na,children:[(0,a.jsx)("div",{className:c()({"flex relative flex-grow":!0,"transparency-grid":ga}),children:(0,a.jsxs)("div",{className:"flex relative w-full h-full",children:[(0,a.jsx)("div",{className:c()({"flex absolute inset-0 flex-grow":!0,"transparency-grid":ga}),style:{...aa?{background:aa}:{}}}),Wn===j.s.LOTTIE_MOCKUP?(0,a.jsx)("div",{className:"flex overflow-auto relative justify-center items-center pr-80 w-full h-full",children:(0,a.jsx)(st,{animation:Oe,canEdit:ra()})}):(0,a.jsxs)("div",{className:c()("relative flex items-center justify-center h-full overflow-auto transition-width",{"w-[calc(100vw-344px)]":Wn!==j.s.NONE,"w-full":Wn===j.s.NONE}),children:[Ie&&!ft&&(0,a.jsx)(rt,{showComments:!0,canComment:!oa,canCreateThemes:sa(),canCreateStateMxns:ra(),mentionables:null===(L=$a.data)||void 0===L?void 0:L.commentMentionableUsers,portalRoot:ja.current,animationUrl:Ie,currentDiscussion:Ja,currentUserId:null===(R=jn.user)||void 0===R?void 0:R.id,entityId:Pa,entityType:ve.TY.FileVersion,fileId:Oe.id,controls:!Ca,isLight:Xa,onCopyFrameClick:ci,onCopyLinkClick:oi,onDispatchStateMachinesReducerAction:ln,onDeleteComment:Fa,onEditComment:Ua,onPlayerLoad:Sa,onPostComment:Va,onReplyToComment:Ba,onResolveComment:Ga,onSelectReaction:Ya,onUnresolveComment:za,withContextMenu:!0,themes:null==Qt?void 0:Qt.map((e=>e.id)),themeId:$t,onThemeChange:wn,formatVersion:Vn,animationHeight:null==_e?void 0:_e.height,animationWidth:null==_e?void 0:_e.width,renderer:La,stateMachineId:dn,hasStateMachines:pa,onStateMachinesModeActiveChange:ya,onStateMachineInputValueChange:ea,showRendererSelect:Un,rendererOverride:_a,onRendererChange:Ra}),Ie&&Kt&&(0,a.jsx)(rt,{portalRoot:ja.current,animationUrl:Kt,controls:!Ca,isLight:Xa,onCopyFrameClick:ci,onCopyLinkClick:oi,onDispatchStateMachinesReducerAction:ln,onPlayerLoad:Sa,onStateMachinesModeActiveChange:ya,onStateMachineInputValueChange:ea,withContextMenu:!0,fileId:Oe.id,themes:null==Qt?void 0:Qt.map((e=>e.id)),themeId:$t,onThemeChange:wn,animationWidth:null==_e?void 0:_e.width,animationHeight:null==_e?void 0:_e.height,formatVersion:Vn,stateMachineId:dn,hasStateMachines:pa,showRendererSelect:Un,rendererOverride:_a,onRendererChange:Ra}),!Ca&&(0,a.jsx)(q,{currentPushoverTab:Wn,openAnimationPanelFunc:fi,canView:la,canFullAccess:ra,previewVersion:oa,canUseAccessibilityAnalyzer:Dn,openAnimationPanel:di,onAccessibilityAnalyzerMenuClick:mi,canUseStateMachines:Fn,hasStateMachines:pa,isStateMachinesModeActive:va,toggleTransparencyGrid:Oa,transparencyGrid:ga,animationBackgroundValue:aa,setAnimationBackgroundValue:ia,animation:Oe,popoverPortalRoot:ja,toggleFocused:Ma,focused:Ca})]})]})}),(0,a.jsx)("div",{className:"flex overflow-hidden absolute right-0 bottom-0 top-16 flex-grow","data-onboarding-watch":"side_panel",children:(0,a.jsxs)(o.u,{show:Wn!==j.s.NONE,className:c()("relative flex flex-col bg-white border-l border-gray-100 w-86",{"pb-24":Mn.show}),enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Wn!==j.s.LOTTIE_MOCKUP&&(0,a.jsx)("div",{className:"absolute top-5 right-6",children:(0,a.jsx)(A.h,{onClick:Aa,icon:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Me.J,{name:"cross",customSize:20})})})}),Wn===j.s.COMMENTS&&(0,a.jsx)(ot,{currentUserId:null===(P=jn.user)||void 0===P?void 0:P.id,discussions:null===(F=qa.data)||void 0===F||null===(D=F.comments)||void 0===D?void 0:D.edges,isFetchingDiscussions:qa.fetching,isInputExpanded:ei,mentionables:null===(U=$a.data)||void 0===U?void 0:U.commentMentionableUsers,mode:Qa,parentDiscussion:Ja,canFetchMoreComments:Za,onCollapseInput:ai,onFetchMoreComments:Ha,onExpandInput:ni,onDelete:Fa,onEdit:Ua,onPost:Va,onReply:Ba,onReplyClick:Ka,onResolve:Ga,onSelectReaction:Ya,onUnresolve:za}),Wn===j.s.FILE_INFO&&_e&&(0,a.jsx)(it,{fileMetaData:_e,basicMetadata:Ze,fileData:ca,canEdit:ra(),canDownload:sa(),isEditing:Boolean(ra()&&gt),fileUrl:Ie,tags:At,fileVersionId:Oe.currentVersion.id,pageSource:"animation details page",thumbnailUrl:null==pt||null===(G=pt.thumbnails)||void 0===G||null===(B=G.png)||void 0===B||null===(V=B.medium)||void 0===V?void 0:V.url,animation:Oe,workspaceId:Oe.project.workspaceId}),Wn===j.s.COLOR_PALETTES&&(0,a.jsx)(at,{animationUrl:Ie,portalRoot:ja.current,workspaceId:Oe.project.workspaceId,setColorModifiedLottie:Xn,setOpenColorPaletteModal:yt}),Wn===j.s.LOTTIE_MOCKUP&&(0,a.jsx)(nt,{canEdit:ra(),animation:Oe,onBackToLottieMockupList:fi(j.s.SEGMENT_MOCKUP)}),Wn===j.s.SEGMENT_MOCKUP&&(0,a.jsx)(tt,{animation:Oe,readonlySegments:fn.length>0,showLottieMockup:fi(j.s.LOTTIE_MOCKUP),onSegmentsDirtyChange:Mt}),Wn===j.s.VERSIONS&&(0,a.jsx)(et,{onVersionSelected:()=>{ht(null),Ct()},animation:Oe}),Wn===j.s.QRCODE&&(0,a.jsx)($e,{fileUrl:Oe.fileObject.url}),!Pn&&Wn===j.s.EMBED&&(0,a.jsx)(Je,{canUpdatePublicAsset:ra(),fileId:Oe.id,currentVersionId:Oe.currentVersionId,workspaceId:Oe.project.workspaceId}),!Pn&&Wn===j.s.DOWNLOAD&&Ze&&(0,a.jsx)(Ke,{animation:Oe,basicMetadata:Ze,fileMetaData:_e,source:"animation"}),Pn&&(Wn===j.s.DOWNLOAD&&Ze||Wn===j.s.EMBED)&&(0,a.jsx)(Qe,{selectedTab:Wn,onTabChange:di,canUpdatePublicAsset:ra(),fileId:Oe.id,currentVersionId:Oe.currentVersionId,workspaceId:Oe.project.workspaceId,animation:Oe,basicMetadata:Ze,fileMetaData:_e,source:"animation",themeId:$t,themes:Qt,stateMachineId:tn,onStateMachineChange:vn,onThemeChange:wn}),Wn===j.s.ACCESSIBILITY_ANALYZER&&(0,a.jsx)(Xe,{animationUrl:Ie,isLoading:yi,optimizedVariants:Si,originalSize:Ci,onClickOptimize:fi(j.s.DOWNLOAD)}),Wn===j.s.STATE_MACHINES&&(0,a.jsx)(Ne.StateMachinesPanel,{withInteractionDetails:!1,inputValues:rn.values,onInputFire:ta,onInputValueChange:na,onIsStateMachinesModeActiveChange:ya,onSelectStateMachine:ma,selectedStateMachineId:dn,stateMachines:ha,activeStates:cn})]})}),(0,a.jsx)("div",{ref:ja})]}),mt&&ft&&pt&&(0,a.jsx)(We,{currentFile:pt,currentFileId:null==Oe?void 0:Oe.id,projectId:null==Oe||null===(Y=Oe.project)||void 0===Y?void 0:Y.id,lottieAnimation:f()(ft),closeCallback:()=>{yt(!1)},animationName:null==Oe?void 0:Oe.name,currentBackgroundColor:(null==Oe?void 0:Oe.backgroundColor)||"none",show:!0}),Nt&&(0,a.jsx)(W.Z,{buttonTitle:"Discard changes",body:"You've made changes to segments that you haven't saved yet. If you leave now, they'll be discarded.",cancelTitle:"Stay on page",closeCallback:hi,isDestructive:!1,onConfirm:ii,showModal:Nt,title:"Discard changes to segments?"}),Bt&&(0,a.jsx)(W.Z,{title:"Confirm copy frame to clipboard?",body:"Your browser, Safari, needs confirmation to copy this frame to the clipboard.",buttonTitle:"Confirm",onConfirm:ri,closeCallback:si,isDestructive:!1,showModal:Bt})]}),Oe&&Nn&&!Ta.fetching&&Ta.data&&(0,a.jsx)(He,{animation:Oe,handback:Ta.data.fileHandback})]}),(0,a.jsx)("div",{ref:Ut,className:"hidden"})]})};ct.getLayout=e=>(0,a.jsx)(E.By,{showSidebar:!1,compactSidebar:!0,children:(0,a.jsx)(Fe.Bx,{children:(0,a.jsx)(we.Q,{children:e})})});var dt=ct},49602:function(e,t,n){n.d(t,{n:function(){return d},s:function(){return c}});var a=n(97458),i=n(61916),o=n(52983);const s={analysis:null,animationData:null,file:null,isLoading:!1,isUploading:!1,url:null,uploadError:null};function r(e,t){switch(t.type){case"SET_ANALYSIS":return{...e,analysis:t.payload};case"SET_ANIMATION_DATA":return{...e,animationData:t.payload};case"SET_FILE":return{...e,file:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_URL":return{...e,url:t.payload};case"RESET_STATE":return s;case"SET_UPLOAD_ERROR":return{...e,uploadError:t.payload};default:return e}}const l=(0,o.createContext)(null);function c(e){let{children:t}=e;const[n,c]=(0,o.useReducer)(r,s),d=(0,o.useCallback)((()=>{c({type:"RESET_STATE"})}),[]),u=(0,o.useCallback)((async e=>{try{c({type:"SET_LOADING",payload:!0}),c({type:"SET_FILE",payload:e});const t=await(0,i.cm)(e);c({type:"SET_ANALYSIS",payload:t});const n=new FileReader;n.onload=e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.result)&&c({type:"SET_ANIMATION_DATA",payload:e.target.result})},n.readAsText(e)}catch(e){console.error("Error processing file:",e),c({type:"SET_ANALYSIS",payload:null})}finally{c({type:"SET_LOADING",payload:!1})}}),[]),f=(0,o.useCallback)((async e=>{if(!n.analysis||n.url!==e)try{c({type:"SET_LOADING",payload:!0}),c({type:"SET_UPLOAD_ERROR",payload:null}),c({type:"SET_URL",payload:e});const t=await fetch(e),n=t.headers.get("content-type"),a=null==n?void 0:n.includes("application/zip");if(!t.ok)throw new Error("Failed to fetch animation");const i=await t.blob(),o=new File([i],a?"animation.lottie":"animation.json",{type:a?"application/zip":"application/json"});await u(o)}catch(e){c({type:"SET_UPLOAD_ERROR",payload:{message:e instanceof Error?e.message:"Unable to load Lottie animation from URL"}})}finally{c({type:"SET_LOADING",payload:!1})}}),[u,n.analysis,n.url]),h=(0,o.useCallback)((e=>c({type:"SET_FILE",payload:e})),[]),p=(0,o.useCallback)((e=>c({type:"SET_LOADING",payload:e})),[]),v=(0,o.useCallback)((e=>c({type:"SET_URL",payload:e})),[]),m=(0,o.useMemo)((()=>({actions:{processFile:u,resetState:d,setFile:h,setIsLoading:p,setUrl:v,handleUrlUpload:f},state:n})),[u,d,h,p,v,f,n]);return(0,a.jsx)(l.Provider,{value:m,children:t})}function d(){const e=(0,o.useContext)(l);if(!e)throw new Error("useAccessibilityAnalyzer must be used within an AccessibilityAnalyzerProvider");return e}},34947:function(e,t,n){n.d(t,{Bx:function(){return r},WW:function(){return l},tU:function(){return c}});var a=n(97458),i=n(52983),o=n(63717);const s=(0,i.createContext)(null),r=e=>{let{children:t}=e;const[,n,r]=(0,o.Rm)(),l=(0,i.useMemo)((()=>({playerRef:r,playerRefCallback:n})),[r,n]);return(0,a.jsx)(s.Provider,{value:l,children:t})},l=()=>{const e=(0,i.useContext)(s);if(!e)throw new Error("useAnimationPlayerRefContext must be used within a AnimationPlayerRefProvider");return e},c=()=>{const{playerRef:e}=l();return e}},97630:function(e,t,n){n.r(t),n.d(t,{AnimationPlayerStateMachinesProvider:function(){return s},useAnimationPlayerStateMachinesActiveStates:function(){return u},useAnimationPlayerStateMachinesContext:function(){return c},useAnimationPlayerStateMachinesContextDispatch:function(){return d}});var a=n(97458),i=n(52983);const o=i.createContext(null),s=e=>{let{children:t,dispatch:n,state:s}=e;const{activeStates:r,currentStateMachineId:l,values:c}=s,d=(0,i.useMemo)((()=>({currentStateMachineId:l,activeStates:r,values:c,dispatch:n})),[r,l,n,c]);return(0,a.jsx)(o.Provider,{value:d,children:t})},r=()=>{},l={currentStateMachineId:"",activeStates:[],values:{},dispatch:r},c=()=>{const e=(0,i.useContext)(o);return e||console.error("State Machines context is not available"),null!=e?e:l},d=()=>{const e=c();var t;return null!==(t=null==e?void 0:e.dispatch)&&void 0!==t?t:r},u=()=>{const e=c();var t;return null!==(t=null==e?void 0:e.activeStates)&&void 0!==t?t:[]}},2336:function(e,t,n){n.d(t,{s:function(){return r},w:function(){return l}});var a=n(97458),i=n(84867),o=n(52983);const s=o.createContext({features:[]}),r=e=>{let{children:t,features:n}=e;return(0,a.jsx)(s.Provider,{value:{features:n},children:t})},l=()=>{const{features:e}=o.useContext(s);return e?new i.UZ(e):new i.UZ([])}},26245:function(e,t,n){n.d(t,{Q:function(){return s}});var a=n(97458),i=n(52983),o=n(30008);const s=e=>{let{children:t}=e;const[n,s]=(0,i.useState)(0),[r,l]=(0,i.useState)(0),c=(0,i.useCallback)((e=>{s((t=>Math.floor(e)!==t?e:t))}),[]);return(0,a.jsx)(o.K.Provider,{value:{currentFrame:n,setCurrentFrame:c,totalFrames:r,setTotalFrames:l},children:t})}},37986:function(e,t,n){n.d(t,{T:function(){return d},f:function(){return f}});var a=n(97458),i=n(52983),o=n(76682),s=n(69826),r=n(40487);const l=e=>{let{onClose:t,show:n}=e;const l=i.useCallback((()=>{t()}),[t]),c=i.useCallback((()=>{(0,s.Z9i)(new s.E5o({action:"state_machines_how_to_url_loaded",target:"iframe framer modal",description:"modal loads how to framer"}))}),[]),d=i.useCallback((e=>{"https://bisque-day-423759.framer.app/".includes(e.origin)&&"click"===e.data.action&&"close"===e.data.intent&&((0,s.Z9i)(new s.E5o({action:"click",target:"close",description:"Close how to modal"})),l())}),[l]);return i.useEffect((()=>(window.addEventListener("message",d),()=>{window.removeEventListener("message",d)})),[d]),(0,a.jsx)(o.H,{show:n,size:"custom",contentClass:"w-full max-w-[600px]",footerSeparator:!1,closeOnEscape:!0,hideOnBackgroundClick:!0,showHeader:!1,contentPadding:"p-0",children:(0,a.jsx)("div",{className:"h-[500px]",children:(0,a.jsx)(r.u,{allowTopNavigation:!0,allowScripts:!0,allowPopups:!0,allowForms:!0,allow:"clipboard-write",src:"https://bisque-day-423759.framer.app/",title:"Implement State Machine",className:"w-full h-full border-none",onLoad:c})})})},c=(0,i.createContext)(null),d=e=>{let{children:t}=e;const[n,o]=i.useState(!1),s=i.useCallback((()=>{o((e=>!e))}),[]),r=(0,i.useMemo)((()=>({onToggle:s,show:n})),[s,n]);return(0,a.jsxs)(c.Provider,{value:r,children:[t,(0,a.jsx)(l,{onClose:s,show:n})]})},u={onToggle:()=>{},show:!1},f=()=>{var e;const{onToggle:t}=null!==(e=(0,i.useContext)(c))&&void 0!==e?e:u;return t}},53749:function(e,t,n){n.d(t,{kF:function(){return l},YC:function(){return r},VY:function(){return s},sq:function(){return o},IS:function(){return i}});var a=n(75800);const i=(0,a.atom)({key:"playerIsPlaying",default:!0}),o=(0,a.atom)({key:"playerDirection",default:1}),s=(0,a.atom)({key:"playerCurrentSegment",default:[]}),r=(0,a.atom)({key:"playerCurrSegmentId",default:""}),l=(0,a.atom)({key:"isPlayerPlayOnHover",default:!1})},63410:function(e,t,n){var a,i;n.d(t,{f:function(){return a},p:function(){return i}}),function(e){e.COLLECTION="COLLECTION",e.FILE="FILE"}(a||(a={})),function(e){e.COMMENT="comment",e.DOWNLOAD_AND_VIEW="downloadAndView",e.EDIT_ACCESS="editAccess",e.NO_ACCESS="noAccess",e.VIEW_ONLY="viewOnly"}(i||(i={}))},7560:function(e,t,n){n.d(t,{$V:function(){return r},MM:function(){return u},lr:function(){return s},tL:function(){return o},tr:function(){return c},yo:function(){return d}});var a=n(59271),i=n(95049);const o=e=>{let{container:t,x:n,y:a}=e;const i=t.getBoundingClientRect(),o=2048/i.width,s=2048/i.height;return{x:n-i.x,y:a-i.y,ratio:{x:o/2048*100,y:s/2048*100}}},s=e=>{let{marker:t}=e;if(t.ratio){return{left:t.x*t.ratio.x,top:t.y*t.ratio.y}}return{left:0,top:0}},r=(e,t)=>{if(e){if(e.url&&e.fileSize)return a.ws.Completed;switch(e.status){case"PROCESSED":return a.ws.Completed;case"ERROR":return a.ws.Failed}}switch(t){case"PROCESSED":return a.ws.Completed;case"FAILED":return a.ws.Failed}return a.ws.InProgress},l=async e=>await i.J2.fromURL(e),c=async(e,t)=>{const n=await l(e),a=await n.getAnimationAtIndex(0);if(!a)return a;const i=await a.toJSON({inlineAssets:!0});if(t){const e=await n.getTheme(t),a=null==e?void 0:e.data;a&&(i.slots?Object.assign(i.slots,a):Object.assign(i,{slots:a}))}return i},d=async e=>{const t=await l(e),n=await t.getAnimationAtIndex(0);if(!n)return n;return await n.toArrayBuffer({inlineAssets:!0})},u=async e=>{if(/(http|https):\s*/u.test(e)){const t=await(await fetch(e)).blob();return new File([t],e.split("/").reverse()[0],{lastModified:(new Date).getTime(),type:t.type})}throw new Error("Invalid animation URL")}},91034:function(e,t,n){var a,i;n.d(t,{U:function(){return i},i:function(){return a}}),function(e){e.Error="error",e.Input="input",e.Output="output"}(a||(a={})),function(e){e.PNG="png",e.SVG="svg"}(i||(i={}))},98271:function(e,t,n){n.d(t,{w:function(){return s}});var a=n(17558),i=n(36132);const o={"Access denied!":e=>{var t,n,i,o;const s=null!==(o=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==o?o:"";var r;const l=null!==(r=null==e||null===(i=e.extensions)||void 0===i||null===(n=i.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",s),console.log("Stacktrace:",l),new a.J},"Database query failed":e=>{var t,n,i,o;const s=null!==(o=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==o?o:"";var r;const l=null!==(r=null==e||null===(i=e.extensions)||void 0===i||null===(n=i.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",s),console.log("Stacktrace:",l),new a.J},"File not found":e=>{var t,n,a,o;const s=null!==(o=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==o?o:"";var r;const l=null!==(r=null==e||null===(a=e.extensions)||void 0===a||null===(n=a.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",s),console.log("Stacktrace:",l),new i.T},Forbidden:e=>{var t,n,i,o;const s=null!==(o=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==o?o:"";var r;const l=null!==(r=null==e||null===(i=e.extensions)||void 0===i||null===(n=i.exception)||void 0===n?void 0:n.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",s),console.log("Stacktrace:",l),new a.J}};function s(e){e.networkError?console.error("Network error:",e.networkError):e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.forEach((e=>{const t=e.message,n=Object.keys(o).find((e=>t.includes(e)));var a;n?null===(a=o[n])||void 0===a||a.call(o,e):console.error("GraphQL error:",e)})):console.error("Unknown error:",e)}}}]);