"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4153],{84153:function(e,t,n){n.r(t),n.d(t,{WorkspaceCollectionActionMenu:function(){return I},default:function(){return S}});var l=n(97458),a=n(52983),o=n(80794),s=n(75800),i=n(95931),c=n(98532),r=n(29602),d=n(31401),m=n(9744),u=n(69826),h=n(54805),p=n(61278),x=n(60202),g=n(83565),k=n(91406),v=n(80951);const w=e=>{let{close:t,collection:n,show:s}=e;const[,i]=(0,o.Db)(h.hr),[c,r]=(0,a.useState)({}),[d,m]=(0,a.useState)(n.name),[w,f]=(0,a.useState)(!1),[C,j]=(0,a.useState)(""),b=(0,a.useCallback)((e=>{e&&(e.focus(),e.select())}),[]),I=(0,a.useCallback)((async e=>{if(e.preventDefault(),d.length){r({}),f(!0);try{const e=await i({id:n.id,input:{name:d}});e.error?(f(!1),(0,p.I1)(e.error,c,r)):(f(!1),t(),(0,u.Z9i)(new u.iu({collectionId:n.id,collectionName:d,workspaceId:n.workspaceId})))}catch(e){throw f(!1),new Error("An unexpected error occurred during collection rename operation.")}}else r({name:"Name is required"})}),[n,t,c,d,i]),S=(0,a.useCallback)((()=>{t(),m(n.name),r({}),j("")}),[n.name,t]),N=(0,a.useCallback)((e=>{m(e.currentTarget.value.trimStart()),(0,x.s)(e.currentTarget.value.trimStart(),j)}),[]);return(0,l.jsx)(k.ModalV2,{show:s,title:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("h3",{className:"text-lg leading-6 text-gray-900 font-bold",children:"Rename"})}),closeCallback:S,testId:"rename-workspace-collection-modal",children:(0,l.jsx)("form",{onSubmit:I,children:(0,l.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)(v.I,{placeholder:"Collection name",onChange:N,inputRef:b,value:d,error:(0,p.ie)("name",c)||C,maxLength:x.C})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(g.z,{text:"Done",onClick:I,disabled:!d.length||w||C.length>0})})]})})})};var f=n(81725),C=n(36788),j=n(33345),b=n(10400);const I=e=>{let{children:t,collection:n,fromSidebar:p,iconSizeClass:x,isHovered:g,navigateToHomeAfterDelete:k=!0,onOpenChange:v,onSelect:I,source:S}=e;const{hasUpdateAccess:N}=(0,C.S)({scopes:n.collectionPermissionScopes}),[y,P]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),A=(0,s.useSetRecoilState)(j.T),{activeWorkspace:E}=(0,b.cF)(),[,M]=(0,o.Db)(h.nE),{isWorkspaceSuspended:V,openSuspendedWorkspaceModal:_}=(0,f.q)(n.workspaceId),B=(0,a.useCallback)((e=>{M({id:n.id,isPrivate:e})}),[n.id,M]),H=(0,a.useCallback)((e=>{(0,u.Z9i)(new u.jUV({action:"click",label:e,source:S}))}),[S]);return N()?(0,l.jsx)("div",{className:"flex items-center mr-1 ".concat(g||D?"visible":"invisible"),children:(0,l.jsxs)(i.f,{onOpenChange:e=>{R(e),null==v||v(e),e&&H("open-collection-action-menu")},children:[V?t||(0,l.jsx)(c.h,{name:"meatball-menu",small:p,sizeClass:x,darker:!p,onClick:_,testId:"workspace-collection-action-menu-trigger-suspended"}):(0,l.jsx)(i.f.Trigger,{asChild:!0,type:"icon-only",children:t||(0,l.jsx)(c.h,{tooltip:"Rename, permission, and more...",tooltipPlacement:"top",name:"meatball-menu",sizeClass:x,small:p,darker:!p,testId:"workspace-collection-action-menu-trigger"})}),(0,l.jsxs)(i.f.Content,{side:"bottom",align:"start",children:[(0,l.jsxs)(i.f.Item,{onSelect:e=>{null==I||I("rename"),e.stopPropagation(),P(!0),H("rename-collection-cta")},testId:"workspace-collection-action-menu-rename-button",children:[(0,l.jsx)(r.J,{medium:!0,name:"pencil",marginRight:!0}),"Rename"]}),(0,l.jsxs)(i.f.Item,{onSelect:e=>{e.stopPropagation(),null==I||I("share"),A({show:!0,collectionId:n.id,isPrivate:Boolean(n.isPrivate),workspaceId:n.workspaceId,workspaceIcon:(null==E?void 0:E.icon)||"",workspaceName:(null==E?void 0:E.name)||""}),H("share-collection-cta")},testId:"workspace-collection-action-menu-share-button",children:[(0,l.jsx)(r.J,{medium:!0,name:"share",marginRight:!0}),"Share"]}),(0,l.jsx)(d.u,{textCenter:!1,title:n.isPrivate?"Share this collection with everyone in the workspace":"Make this collection only visible to people who are invited",placement:"right",children:(0,l.jsxs)(i.f.Item,{onSelect:e=>{e.stopPropagation(),null==I||I(n.isPrivate?"share with team":"make private"),B(!n.isPrivate),H(n.isPrivate?"share-collection-with-team-cta":"make-collection-private-cta")},testId:"workspace-collection-action-menu-share-with-team-button",children:[n.isPrivate?(0,l.jsx)(r.J,{medium:!0,padding:!0,name:"lock-open",marginRight:!0}):(0,l.jsx)(r.J,{name:"lock",medium:!0,padding:!0,marginRight:!0}),n.isPrivate?"Share with team":"Make private"]})}),(0,l.jsx)(i.f.Separator,{}),(0,l.jsx)(i.f.Item,{asChild:!0,destructiveAction:!0,onSelect:e=>{null==I||I("delete"),e.stopPropagation(),z(!0),H("delete-collection-cta")},testId:"workspace-collection-action-menu-delete-button",children:(0,l.jsxs)("div",{className:"flex items-center text-sm rounded cursor-pointer hover:bg-red-100 ",children:[(0,l.jsx)(r.J,{medium:!0,name:"delete",color:"text-red-500",marginRight:!0}),(0,l.jsx)("div",{className:"text-red-500",children:" Delete collection"})]})})]}),(0,l.jsx)(w,{collection:n,show:y,close:()=>{P(!1)}}),(0,l.jsx)(m.a,{show:T,collectionId:n.id,workspaceId:n.workspaceId,name:n.name,close:()=>{z(!1)},navigateToHomeAfterDelete:k})]})}):null};var S=I},79580:function(e,t,n){n.d(t,{s:function(){return r}});var l=n(97458),a=n(52983),o=n(86289),s=n(10836),i=n(91406),c=n(76682);const r=e=>{let{additionalV3Classname:t,body:n,buttonTitle:r,cancelTitle:d="Cancel",closeCallback:m=(()=>null),confirmLoading:u=!1,isDestructive:h=!0,onConfirm:p,showModal:x,testId:g,title:k,zIndexClassName:v="z-50",version:w="v2",clampTitleInV3:f=!0}=e;const C=(0,a.useCallback)((()=>{p()}),[p]),j=(0,a.useCallback)((e=>{m(e)}),[m]);return"v3"===w?(0,l.jsx)(c.H,{titleSeparator:!1,title:k,show:x,headerPadding:"p-4 pb-2",titleCssClass:"text-lg font-bold text-primary",contentPadding:"px-4 py-0",footerSeparator:!1,footer:(0,l.jsxs)("div",{className:"flex gap-x-2 justify-end items-center",children:[(0,l.jsx)(s.z,{onClick:()=>j(i.CloseSource.CANCEL_BUTTON),size:"sm",variant:"ghost",children:d}),(0,l.jsx)(s.z,{onClick:C,disabled:u,loading:u,size:"sm",variant:h?"danger":"primary",children:r})]}),clampTitleInV3:f,contentClass:t,children:(0,l.jsx)("p",{className:"text-sm text-primary",children:n})}):(0,l.jsx)(i.ModalV2,{show:x,title:k,paddingSize:"md",zIndexClassName:v,closeCallback:j,testId:g,children:(0,l.jsxs)("div",{className:"mt-6 space-y-10",children:[(0,l.jsx)("p",{className:"text-sm text-gray-900",children:n}),(0,l.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,l.jsx)(o.z,{variant:"ghost",onClick:()=>j(i.CloseSource.CANCEL_BUTTON),fluid:!0,children:d}),(0,l.jsx)(o.z,{disabled:u,showLoader:u,color:h?"red":"teal",onClick:C,fluid:!0,children:r})]})]})})};t.Z=r},9744:function(e,t,n){n.d(t,{a:function(){return u}});var l=n(97458),a=n(69826),o=n(76558),s=n(52983),i=n(80794),c=n(54805),r=n(79580),d=n(42740),m=n(57303);const u=e=>{let{close:t,collectionId:n,name:u,navigateToHomeAfterDelete:h=!0,show:p,workspaceId:x}=e;const g=(0,d.p)(),k=(0,o.useRouter)(),[,v]=(0,i.Db)(c.cq),w=(0,s.useCallback)((async()=>{try{(await v({id:n})).error||((0,a.Z9i)(new a.rzr({collectionId:n,collectionName:u,workspaceId:x})),null==g||g.pushSuccess("Collection deleted successfully"),h&&k.push("/"))}catch(e){throw e instanceof Error?new Error(e.message):new Error("Cannot delete collection, an unexpected error occurred")}}),[v,u,k,g,x,n,h]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.s,{title:(0,l.jsxs)("h3",{className:"text-lg leading-6 text-red-500 font-bold w-[90%]",children:['Delete "',u,'" collection ?']}),body:(0,m.B)("All of its content will be removed. You won't be able to undo this."),buttonTitle:"Delete",showModal:p,onConfirm:w,closeCallback:t,testId:"delete-workspace-collection-modal"})})}},57303:function(e,t,n){n.d(t,{B:function(){return l}});const l=function(e){return e}}}]);