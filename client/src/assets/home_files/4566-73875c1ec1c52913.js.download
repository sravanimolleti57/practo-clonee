"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4566,8033],{28033:function(e,l,o){o.r(l),o.d(l,{RenameAnimationModal:function(){return m}});var s=o(97458),n=o(52983),a=o(80794),t=o(25675),i=o(61278),r=o(60202),c=o(83565),d=o(91406),u=o(80951),h=o(42740);const m=e=>{let{animationId:l,animationName:o,close:m,show:f}=e;const p=(0,h.p)(),[,x]=(0,a.Db)(t.Vl),[v,g]=(0,n.useState)({}),[b,C]=(0,n.useState)(o),[w,k]=(0,n.useState)(!1),[j,M]=(0,n.useState)("");(0,n.useEffect)((()=>{f&&C(o)}),[o,f]);const S=(0,n.useCallback)((e=>{e&&(e.focus(),e.select())}),[]),y=(0,n.useCallback)((async e=>{if(e.preventDefault(),b.length){k(!0);try{const e=await x({id:l,input:{name:b}});e.error?(k(!1),(0,i.I1)(e.error,v,g)):(m(),k(!1))}catch(e){throw k(!1),new Error("An unexpected error occurred during animation rename operation.")}}}),[l,m,v,b,x]),N=(0,n.useCallback)((()=>{m(),g({}),M("")}),[m]),P=(0,n.useCallback)((e=>{const l=e.currentTarget.value.trimStart();C(l),(0,r.s)(l,M),l.length===r.C&&(null==p||p.pushInfo("Asset name shortened to ".concat(r.C," characters")))}),[]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(d.ModalV2,{show:f,title:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("h3",{className:"text-lg leading-6 text-gray-900 font-bold",children:"Rename"})}),closeCallback:N,children:(0,s.jsx)("form",{onSubmit:y,children:(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(u.I,{placeholder:"File Name",onChange:P,inputRef:S,value:b,error:(0,i.ie)("name",v)||j,maxLength:r.C})}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(c.z,{text:"Done",onClick:y,disabled:!b.length||w||j.length>0})})]})})})})};l.default=m},64566:function(e,l,o){o.r(l),o.d(l,{GridView:function(){return F},default:function(){return B}});var s=o(97458),n=o(52983),a=o(75800),t=o(96734),i=o(84867),r=o(37210),c=o(83849),d=o.n(c),u=o(66829),h=o(65529),m=o(85132),f=o(40331);const p=(0,r.zo)("button",{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:32,fontSize:14,fontWeight:700,padding:"4px 12px",borderRadius:8,backgroundColor:"#00C1A2",border:"none",color:"#FFF",cursor:"pointer",transition:"all 0.3s ease-in-out","&:hover":{backgroundColor:"#00C1A2"},"&:focus":{outline:"none"},"&:active":{backgroundColor:"#00C1A2"}}),x=e=>{let{workspaceId:l}=e;const o=(0,t.SS)(i.AD.FILE_UPLOAD_LIMIT),{onClick:a}=(0,m.Z)({workspaceId:l}),{planName:r}=(0,f.g)(l),[c,u]=(0,n.useState)(!1),h=(0,n.useCallback)((()=>{u(!0)}),[]),x=(0,n.useCallback)((()=>{u(!1)}),[]);return(0,s.jsx)("div",{onMouseEnter:h,onMouseLeave:x,className:d()({"absolute top-0 right-0 bottom-0 left-0 z-10 w-full h-full rounded-md":!0}),children:c&&(0,s.jsxs)("div",{className:"flex flex-col items-center p-5 space-y-5 h-full bg-white bg-opacity-90 rounded-md border border-gray-50",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700 line-clamp-5",children:["You can only access your ",o.value," most recently uploaded files on your current ",r,". Upgrade to access all your files."]}),(0,s.jsx)(p,{onClick:a,children:"Upgrade"})]})})},v=e=>{let{animation:l,disableMenu:o,hrefPrefix:n,isSelected:a,onSelectionChange:t,searchParams:i,selectable:r,selectionMode:c,showAddToCollectionMenuItem:d,showStatus:m=!0,showUpdatedUser:f,workspaceId:p}=e;var v,g,b,C,w;const k=(0,h.Q)(p),j=!(k.length>0)||k.includes(l.id),M=Boolean(l.currentVersion.communityAnimationId);return(0,s.jsxs)("div",{className:"relative rounded-md",children:[!j&&!M&&(0,s.jsx)(x,{workspaceId:l.project.workspaceId}),(0,s.jsx)(u.K,{scopes:l.animationPermissionScopes,animation:l,hrefPrefix:n,backgroundColor:l.backgroundColor,thumbnail:null===(C=l.fileObject)||void 0===C||null===(b=C.thumbnails)||void 0===b||null===(g=b.webp)||void 0===g||null===(v=g.medium)||void 0===v?void 0:v.url,title:l.name,url:null===(w=l.fileObject)||void 0===w?void 0:w.url,searchParams:i,showUpdatedUser:f,showAddToCollectionMenuItem:d,selectable:r,selected:a,onSelectionChange:t,selectionMode:c,showStatus:m,disableMenu:o,upgradeRequired:!j&&!M})]})};var g=o(28033),b=o(15817),C=o(17216),w=o(20516),k=o(58826),j=o(80731),M=o.n(j),S=o(30631),y=o(69331),N=o(84569);const P=e=>{let{disableMenu:l=!1,file:o,hrefPrefix:a,isSelected:t=!1,onSelectionChange:i,searchParams:r,selectable:c=!1,selectionMode:u=!1}=e;var h,m,f,p,x,v,j,P;const A=(0,n.useRef)(null),[I,L]=(0,n.useState)(!1),[U,R]=(0,n.useState)(!1),{canFullAccess:E}=(0,w.a)({scopes:o.animationPermissionScopes||[]}),F=(0,n.useCallback)((()=>{R(!1)}),[]),B=(0,n.useCallback)((()=>{i&&i()}),[i]),D=(0,n.useCallback)((()=>{L(!0)}),[L]),T=(0,n.useCallback)((()=>{L(!1)}),[L]),V=(0,n.useCallback)((()=>{E()&&R(!0)}),[E]),z=(0,n.useCallback)((e=>{u&&(e.stopPropagation(),e.preventDefault(),null==i||i())}),[i,u]),H=(0,n.useCallback)((e=>{var l;(e.stopPropagation(),e.preventDefault(),u&&i)?i():null===(l=A.current)||void 0===l||l.click()}),[i,u]),_=(0,n.useCallback)((e=>{var l;"Space"===e.key&&(u&&i?i():null===(l=A.current)||void 0===l||l.click())}),[i,u]),Q=(0,k.h)(H,V),O=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),Q(e)}),[Q]),W=(0,n.useMemo)((()=>(0,S.mW)({file:o,prefix:a,searchParams:r})),[o,a,r]);return(0,s.jsxs)(M(),{ref:A,href:W,target:"_blank",className:d()('block relative w-full transition duration-100 ease-out group before:block before:content[""] before:pt-[100%]'),onClick:z,onMouseEnter:D,onMouseLeave:T,children:[(0,s.jsx)("div",{className:d()("absolute -top-px -bottom-px -left-px text-gray-100 pointer-events-none -right-[2px] group-hover:text-gray-200",{hidden:t}),children:(0,s.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 204 197",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:(0,s.jsx)("path",{d:"M162.513 0.5C164.24 0.5 165.897 1.18772 167.116 2.41113L184.905 20.2568L184.909 20.2607L200.848 36.6504C202.03 37.8657 202.69 39.4952 202.688 41.1904L202.507 190.008C202.502 193.595 199.594 196.5 196.007 196.5H7C3.41015 196.5 0.5 193.59 0.5 190V7L0.508789 6.66504C0.683123 3.23086 3.5225 0.5 7 0.5H162.513Z",fill:"white",stroke:"currentColor",vectorEffect:"non-scaling-stroke"})})}),(0,s.jsx)("div",{className:d()("absolute -top-[2px] -left-0.5 -right-[3px] -bottom-[2px] pointer-events-none text-actionPrimary",{hidden:!t}),children:(0,s.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 206 199",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:(0,s.jsx)("path",{d:"M163.513 1C165.373 1 167.157 1.74098 168.471 3.05859L186.259 20.9033L186.268 20.9121L202.206 37.3018C203.479 38.6105 204.19 40.3649 204.188 42.1904L204.007 191.009C204.002 194.871 200.869 198 197.007 198H8C4.13401 198 1 194.866 1 191V8L1.00879 7.63965C1.19633 3.94111 4.25486 1 8 1H163.513Z",fill:"white",stroke:"currentColor",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})})}),(0,s.jsxs)("div",{className:"flex absolute inset-0 flex-col gap-2 p-2",children:[(0,s.jsxs)("div",{className:d()("w-full h-[calc(100%-45px)] relative z-0"),children:[(0,s.jsx)("div",{onKeyDown:_,onClick:H,className:"absolute inset-0 z-10 cursor-pointer"}),(0,s.jsx)("div",{className:"-mx-[7px] h-full border-b border-gray-50",children:(0,s.jsx)("div",{className:"px-[7px] h-full overflow-hidden !rounded-tr-[96px] transparency-grid-square",children:(0,s.jsx)("div",{className:"mx-auto h-full",children:(0,s.jsx)(b.y,{src:(null===(p=o.fileObject)||void 0===p||null===(f=p.thumbnails)||void 0===f||null===(m=f.webp)||void 0===m||null===(h=m.medium)||void 0===h?void 0:h.url)||(null===(P=o.fileObject)||void 0===P||null===(j=P.thumbnails)||void 0===j||null===(v=j.png)||void 0===v||null===(x=v.medium)||void 0===x?void 0:x.url)})})})})]}),(0,s.jsx)(N.y,{file:o,isHovered:I,onTitleClick:O,showUpdatedUser:!0,disableMenu:l,icon:(0,s.jsx)(y.$,{isAnimation:!1,isCreator:!0,showFilledIcon:I,sizeClassName:"w-6 h-6 -ml-1"})})]}),(I&&c||t||u)&&E()&&(0,s.jsx)("div",{className:"flex absolute top-0 left-0 justify-center items-center w-6 h-6",children:(0,s.jsx)(C.X,{label:"check-card",checked:t,onChange:B})}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-[20%] h-[21%] pointer-events-none text-gray-100",children:(0,s.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 37 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:(0,s.jsx)("path",{d:"M1 0.5V29.8196C1 33.8855 4.07196 37.0001 8.13789 37.0001H36.5",fill:"white",stroke:"currentColor",strokeWidth:"1",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke"})})}),(0,s.jsx)(g.RenameAnimationModal,{show:U,animationId:o.id,animationName:o.name,close:F})]})};var A=o(47941),I=o(74144),L=o(45952),U=o(63120),R=o(59271),E=o(57157);const F=e=>{let{canLoadMore:l=!1,fileHrefPrefix:o,fileSearchParams:t,files:i,isLoadingMore:r=!1,onLoadMore:c=(()=>{}),onSelectionChange:d,onFolderDownloadAllClick:u,selectable:h=!1,selectedAnimations:m,selectionMode:f,showUpdatedUser:p=!0,showStatus:x=!0,workspaceId:g}=e;const b=(0,a.useRecoilValue)(U.Y),C=(0,n.useCallback)((e=>()=>{d&&d(e.id)}),[d]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-6 lg:grid-cols-3 xl:grid-cols-4 xxl:grid-cols-5 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7 5xl:grid-cols-8 6xl:grid-cols-12",children:i.map((e=>{const l="file-card-".concat(e.id);var n,a;return(0,R.qR)(e)?(0,s.jsx)(L.A,{title:e.name,username:(null===(n=e.modifiedBy)||void 0===n?void 0:n.name)||(null===(a=e.createdBy)||void 0===a?void 0:a.name),date:e.updatedAt,folder:e,filesCount:e.filesCount,scopes:e.animationPermissionScopes,onDownloadAllClick:u,hrefPrefix:o,searchParams:t,selectable:h,selectionMode:f,onSelectionChange:C(e),isSelected:!!m&&Boolean(m.some((l=>l.id===e.id)))},l):(0,R.j7)(e)?(0,s.jsx)(I.L,{file:e,hrefPrefix:o,searchParams:t,selectable:h,onSelectionChange:C(e),showAddToCollectionMenuItem:!0,selected:!!m&&Boolean(m.some((l=>l.id===e.id))),selectionMode:f,showStatus:x,showUpdatedUser:p},l):(0,R.N1)(e)?(0,s.jsx)(A.y,{file:e,hrefPrefix:o,searchParams:t,selectable:h,onSelectionChange:C(e),showAddToCollectionMenuItem:!0,selected:!!m&&Boolean(m.some((l=>l.id===e.id))),selectionMode:f,showStatus:x,showUpdatedUser:p},l):(0,R.QR)(e)?(0,s.jsx)(v,{animation:e,hrefPrefix:o,searchParams:t,showAddToCollectionMenuItem:!0,showUpdatedUser:p,showStatus:x,selectable:h,isSelected:!!m&&Boolean(m.some((l=>l.id===e.id))),onSelectionChange:C(e),selectionMode:f,disableMenu:b>0,workspaceId:g},l):(0,R.xK)(e)?(0,s.jsx)(P,{file:e,selectable:h,onSelectionChange:C(e),isSelected:!!m&&Boolean(m.includes(e)),disableMenu:b>0,hrefPrefix:o,searchParams:t,selectionMode:f}):(0,s.jsx)(s.Fragment,{})}))}),l&&(0,s.jsx)(E.Q,{className:"col-span-full",onLoadMore:c,loadingMore:r})]})};var B=F},65529:function(e,l,o){o.d(l,{Q:function(){return c}});var s=o(52983),n=o(80794),a=o(10400),t=o(25675),i=o(84867),r=o(61278);const c=e=>{const l=(0,a.hp)(e),o=(0,r.fK)(l),[c]=(0,n.aM)({query:t.Z$,pause:!e||!l||!o||o!==i.Qi.FREE,variables:{workspaceId:e}});return(0,s.useMemo)((()=>{var e;return o===i.Qi.FREE&&(null===(e=c.data)||void 0===e?void 0:e.fileIdsWithinLimit)||[]}),[c,o])}}}]);